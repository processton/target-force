import{g as i}from"./vform.es.js";import{a,O as m,F as n}from"./OpenForm.js";import{n as l,V as d,t as f}from"./app.js";import{V as u}from"./Collapse.js";import{F as p}from"./FormCleanings.js";const c={components:{VTransition:u,VButton:d,OpenFormButton:a,OpenForm:m,FormCleanings:p},props:{form:{type:Object,required:!0},creating:{type:Boolean,default:!1},adminPreview:{type:Boolean,default:!1},submitButtonClass:{type:String,default:""}},mixins:[n],data(){return{loading:!1,submitted:!1,themes:f,passwordForm:new i({password:null}),hidePasswordDisabledMsg:!1,submissionId:!1}},computed:{isIframe(){return window.location!==window.parent.location||window.frameElement},isEmbedPopup(){return window.location.href.includes("popup=true")},theme(){return this.themes[this.themes.hasOwnProperty(this.form.theme)?this.form.theme:"default"]},isPublicFormPage(){return this.$route.name==="forms.show_public"},isHideTitle(){return this.form.hide_title||window.location.href.includes("hide_title=true")}},mounted(){},methods:{submitForm(s,t){if(this.creating){this.submitted=!0,this.$emit("submitted",!0);return}this.loading=!0,this.closeAlert(),s.post("/api/forms/"+this.form.slug+"/answer").then(e=>{this.$logEvent("form_submission",{workspace_id:this.form.workspace_id,form_id:this.form.id}),this.isIframe&&window.parent.postMessage({type:"form-submitted",form:{slug:this.form.slug,id:this.form.id},submission_data:s.data()},"*"),window.postMessage({type:"form-submitted",form:{slug:this.form.slug,id:this.form.id},submission_data:s.data()},"*");try{window.localStorage.removeItem(this.formPendingSubmissionKey)}catch(r){}e.data.redirect&&e.data.redirect_url&&(window.location.href=e.data.redirect_url),e.data.submission_id&&(this.submissionId=e.data.submission_id),this.loading=!1,this.submitted=!0,this.$emit("submitted",!0),this.form.confetti_on_submission&&this.playConfetti()}).catch(e=>{e.response.data&&e.response.data.message&&this.alertError(e.response.data.message),this.loading=!1,t()})},restart(){this.submitted=!1,this.$emit("restarted",!0)},passwordEntered(){this.passwordForm.password!==""&&this.passwordForm.password!==null?this.$emit("password-entered",this.passwordForm.password):this.addPasswordError("The Password field is required.")},addPasswordError(s){this.passwordForm.errors.set("password",s)}}};var _=function(){var t=this,e=t._self._c;return t.form?e("div",{staticClass:"open-complete-form"},[t.isHideTitle?t._e():e("h1",{staticClass:"mb-4 px-2",class:{"mt-4":t.isEmbedPopup},domProps:{textContent:t._s(t.form.title)}}),t.isPublicFormPage&&t.form.is_password_protected?e("div",[e("p",{staticClass:"form-description mb-4 text-gray-700 dark:text-gray-300 px-2"},[t._v(" This form is protected by a password. ")]),e("div",{staticClass:"form-group flex flex-wrap w-full"},[e("div",{staticClass:"relative mb-3 w-full px-2"},[e("text-input",{attrs:{form:t.passwordForm,name:"password","native-type":"password",label:"Password"}})],1)]),e("div",{staticClass:"flex flex-wrap justify-center w-full text-center"},[e("v-button",{on:{click:t.passwordEntered}},[t._v(" Submit ")])],1)]):t._e(),e("v-transition",[!t.form.is_password_protected&&t.form.password&&!t.hidePasswordDisabledMsg?e("div",{staticClass:"border shadow-sm p-2 my-4 flex items-center rounded-md bg-yellow-100 border-yellow-500"},[e("div",{staticClass:"flex flex-grow"},[e("p",{staticClass:"mb-0 py-2 px-4 text-yellow-600"},[t._v(" We disabled the password protection for this form because you are an owner of it. ")]),e("v-button",{attrs:{color:"yellow"},on:{click:function(r){t.hidePasswordDisabledMsg=!0}}},[t._v(" OK ")])],1)]):t._e()]),t.isPublicFormPage&&(t.form.is_closed||t.form.visibility=="closed")?e("div",{staticClass:"border shadow-sm p-2 my-4 flex items-center rounded-md bg-yellow-100 border-yellow-500"},[e("div",{staticClass:"flex-grow"},[e("p",{staticClass:"mb-0 py-2 px-4 text-yellow-600",domProps:{innerHTML:t._s(t.form.closed_text)}})])]):t._e(),t.isPublicFormPage&&t.form.max_number_of_submissions_reached?e("div",{staticClass:"border shadow-sm p-2 my-4 flex items-center rounded-md bg-yellow-100 border-yellow-500"},[e("div",{staticClass:"flex-grow"},[e("p",{staticClass:"mb-0 py-2 px-4 text-yellow-600",domProps:{innerHTML:t._s(t.form.max_submissions_reached_text)}})])]):t._e(),t.adminPreview?t._e():e("form-cleanings",{staticClass:"mb-4 mx-2",attrs:{hideable:!0,form:t.form,"specify-form-owner":!0}}),!t.form.is_password_protected&&(!t.isPublicFormPage||!t.form.is_closed&&!t.form.max_number_of_submissions_reached&&t.form.visibility!="closed")?e("transition",{attrs:{"enter-active-class":"duration-500 ease-out","enter-class":"translate-x-full opacity-0","enter-to-class":"translate-x-0 opacity-100","leave-active-class":"duration-500 ease-in","leave-class":"translate-x-0 opacity-100","leave-to-class":"translate-x-full opacity-0",mode:"out-in"}},[t.submitted?e("div",{key:"submitted",staticClass:"px-2"},[e("p",{staticClass:"form-description text-gray-700 dark:text-gray-300 whitespace-pre-wrap",domProps:{innerHTML:t._s(t.form.submitted_text)}}),t.form.re_fillable?e("open-form-button",{staticClass:"my-4",attrs:{theme:t.theme,color:t.form.color},on:{click:t.restart}},[t._v(" "+t._s(t.form.re_fill_button_text)+" ")]):t._e(),t.form.editable_submissions&&t.submissionId?e("p",{staticClass:"mt-5"},[e("a",{staticClass:"text-nt-blue hover:underline",attrs:{target:"_parent",href:t.form.share_url+"?submission_id="+t.submissionId}},[t._v(" "+t._s(t.form.editable_submissions_button_text)+" ")])]):t._e(),t.form.no_branding?t._e():e("p",{staticClass:"mt-5"},[e("a",{staticClass:"text-nt-blue hover:underline",attrs:{target:"_parent",href:"https://opnform.com/?utm_source=form&utm_content=create_form_free"}},[t._v("Create your form for free with ")])])],1):e("div",{key:"form"},[t.form.description&&t.form.description!==""?e("p",{staticClass:"form-description mb-4 text-gray-700 dark:text-gray-300 whitespace-pre-wrap px-2",domProps:{innerHTML:t._s(t.form.description)}}):t._e(),t.form?e("open-form",{attrs:{form:t.form,loading:t.loading,fields:t.form.properties,theme:t.theme,"admin-preview":t.adminPreview},on:{submit:t.submitForm},scopedSlots:t._u([{key:"submit-btn",fn:function({submitForm:r}){return[e("open-form-button",{staticClass:"mt-2 px-8 mx-1",class:t.submitButtonClass,attrs:{loading:t.loading,theme:t.theme,color:t.form.color},on:{click:function(o){return o.preventDefault(),r.apply(null,arguments)}}},[t._v(" "+t._s(t.form.submit_button_text)+" ")])]}}],null,!1,434490458)}):t._e(),t.form.no_branding?t._e():e("p",{staticClass:"text-center w-full mt-2"},[e("a",{staticClass:"text-gray-400 hover:text-gray-500 dark:text-gray-600 dark:hover:text-gray-500 cursor-pointer hover:underline text-xs",attrs:{href:"https://opnform.com?utm_source=form&utm_content=powered_by",target:"_blank"}},[t._v("Powered by "),e("span",{staticClass:"font-semibold"})])])],1)]):t._e()],1):t._e()},b=[],h=l(c,_,b,!1,null,null,null,null);const C=h.exports;export{C as O};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT3BlbkNvbXBsZXRlRm9ybS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvb3Blbi9mb3Jtcy9PcGVuQ29tcGxldGVGb3JtLnZ1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyI8dGVtcGxhdGU+XG4gIDxkaXYgdi1pZj1cImZvcm1cIiBjbGFzcz1cIm9wZW4tY29tcGxldGUtZm9ybVwiPlxuICAgIDxoMSB2LWlmPVwiIWlzSGlkZVRpdGxlXCIgY2xhc3M9XCJtYi00IHB4LTJcIiA6Y2xhc3M9XCJ7J210LTQnOmlzRW1iZWRQb3B1cH1cIiB2LXRleHQ9XCJmb3JtLnRpdGxlXCIgLz5cblxuICAgIDxkaXYgdi1pZj1cImlzUHVibGljRm9ybVBhZ2UgJiYgZm9ybS5pc19wYXNzd29yZF9wcm90ZWN0ZWRcIj5cbiAgICAgIDxwIGNsYXNzPVwiZm9ybS1kZXNjcmlwdGlvbiBtYi00IHRleHQtZ3JheS03MDAgZGFyazp0ZXh0LWdyYXktMzAwIHB4LTJcIj5cbiAgICAgICAgVGhpcyBmb3JtIGlzIHByb3RlY3RlZCBieSBhIHBhc3N3b3JkLlxuICAgICAgPC9wPlxuICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgZmxleCBmbGV4LXdyYXAgdy1mdWxsXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZWxhdGl2ZSBtYi0zIHctZnVsbCBweC0yXCI+XG4gICAgICAgICAgPHRleHQtaW5wdXQgOmZvcm09XCJwYXNzd29yZEZvcm1cIiBuYW1lPVwicGFzc3dvcmRcIiBuYXRpdmUtdHlwZT1cInBhc3N3b3JkXCIgbGFiZWw9XCJQYXNzd29yZFwiIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleCBmbGV4LXdyYXAganVzdGlmeS1jZW50ZXIgdy1mdWxsIHRleHQtY2VudGVyXCI+XG4gICAgICAgIDx2LWJ1dHRvbiBAY2xpY2s9XCJwYXNzd29yZEVudGVyZWRcIj5cbiAgICAgICAgICBTdWJtaXRcbiAgICAgICAgPC92LWJ1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPHYtdHJhbnNpdGlvbj5cbiAgICAgIDxkaXYgdi1pZj1cIiFmb3JtLmlzX3Bhc3N3b3JkX3Byb3RlY3RlZCAmJiBmb3JtLnBhc3N3b3JkICYmICFoaWRlUGFzc3dvcmREaXNhYmxlZE1zZ1wiXG4gICAgICAgICAgIGNsYXNzPVwiYm9yZGVyIHNoYWRvdy1zbSBwLTIgbXktNCBmbGV4IGl0ZW1zLWNlbnRlciByb3VuZGVkLW1kIGJnLXllbGxvdy0xMDAgYm9yZGVyLXllbGxvdy01MDBcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBmbGV4LWdyb3dcIj5cbiAgICAgICAgICA8cCBjbGFzcz1cIm1iLTAgcHktMiBweC00IHRleHQteWVsbG93LTYwMFwiPlxuICAgICAgICAgICAgV2UgZGlzYWJsZWQgdGhlIHBhc3N3b3JkIHByb3RlY3Rpb24gZm9yIHRoaXMgZm9ybSBiZWNhdXNlIHlvdSBhcmUgYW4gb3duZXIgb2YgaXQuXG4gICAgICAgICAgPC9wPlxuICAgICAgICAgIDx2LWJ1dHRvbiBjb2xvcj1cInllbGxvd1wiIEBjbGljaz1cImhpZGVQYXNzd29yZERpc2FibGVkTXNnPXRydWVcIj5cbiAgICAgICAgICAgIE9LXG4gICAgICAgICAgPC92LWJ1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L3YtdHJhbnNpdGlvbj5cblxuICAgIDxkaXYgdi1pZj1cImlzUHVibGljRm9ybVBhZ2UgJiYgKGZvcm0uaXNfY2xvc2VkIHx8IGZvcm0udmlzaWJpbGl0eT09J2Nsb3NlZCcpXCJcbiAgICAgICAgIGNsYXNzPVwiYm9yZGVyIHNoYWRvdy1zbSBwLTIgbXktNCBmbGV4IGl0ZW1zLWNlbnRlciByb3VuZGVkLW1kIGJnLXllbGxvdy0xMDAgYm9yZGVyLXllbGxvdy01MDBcIlxuICAgID5cbiAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWdyb3dcIj5cbiAgICAgICAgPHAgY2xhc3M9XCJtYi0wIHB5LTIgcHgtNCB0ZXh0LXllbGxvdy02MDBcIiB2LWh0bWw9XCJmb3JtLmNsb3NlZF90ZXh0XCIgLz5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiB2LWlmPVwiaXNQdWJsaWNGb3JtUGFnZSAmJiBmb3JtLm1heF9udW1iZXJfb2Zfc3VibWlzc2lvbnNfcmVhY2hlZFwiXG4gICAgICAgICBjbGFzcz1cImJvcmRlciBzaGFkb3ctc20gcC0yIG15LTQgZmxleCBpdGVtcy1jZW50ZXIgcm91bmRlZC1tZCBiZy15ZWxsb3ctMTAwIGJvcmRlci15ZWxsb3ctNTAwXCJcbiAgICA+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmxleC1ncm93XCI+XG4gICAgICAgIDxwIGNsYXNzPVwibWItMCBweS0yIHB4LTQgdGV4dC15ZWxsb3ctNjAwXCIgdi1odG1sPVwiZm9ybS5tYXhfc3VibWlzc2lvbnNfcmVhY2hlZF90ZXh0XCIgLz5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGZvcm0tY2xlYW5pbmdzIHYtaWY9XCIhYWRtaW5QcmV2aWV3XCIgOmhpZGVhYmxlPVwidHJ1ZVwiIGNsYXNzPVwibWItNCBteC0yXCIgOmZvcm09XCJmb3JtXCIgOnNwZWNpZnktZm9ybS1vd25lcj1cInRydWVcIiAvPlxuXG4gICAgPHRyYW5zaXRpb25cbiAgICAgIHYtaWY9XCIhZm9ybS5pc19wYXNzd29yZF9wcm90ZWN0ZWQgJiYgKCFpc1B1YmxpY0Zvcm1QYWdlIHx8ICghZm9ybS5pc19jbG9zZWQgJiYgIWZvcm0ubWF4X251bWJlcl9vZl9zdWJtaXNzaW9uc19yZWFjaGVkICYmIGZvcm0udmlzaWJpbGl0eSE9J2Nsb3NlZCcpKVwiXG4gICAgICBlbnRlci1hY3RpdmUtY2xhc3M9XCJkdXJhdGlvbi01MDAgZWFzZS1vdXRcIlxuICAgICAgZW50ZXItY2xhc3M9XCJ0cmFuc2xhdGUteC1mdWxsIG9wYWNpdHktMFwiXG4gICAgICBlbnRlci10by1jbGFzcz1cInRyYW5zbGF0ZS14LTAgb3BhY2l0eS0xMDBcIlxuICAgICAgbGVhdmUtYWN0aXZlLWNsYXNzPVwiZHVyYXRpb24tNTAwIGVhc2UtaW5cIlxuICAgICAgbGVhdmUtY2xhc3M9XCJ0cmFuc2xhdGUteC0wIG9wYWNpdHktMTAwXCJcbiAgICAgIGxlYXZlLXRvLWNsYXNzPVwidHJhbnNsYXRlLXgtZnVsbCBvcGFjaXR5LTBcIlxuICAgICAgbW9kZT1cIm91dC1pblwiXG4gICAgPlxuICAgICAgPGRpdiB2LWlmPVwiIXN1Ym1pdHRlZFwiIGtleT1cImZvcm1cIj5cbiAgICAgICAgPHAgdi1pZj1cImZvcm0uZGVzY3JpcHRpb24gJiYgZm9ybS5kZXNjcmlwdGlvbiAhPT0nJ1wiXG4gICAgICAgICAgIGNsYXNzPVwiZm9ybS1kZXNjcmlwdGlvbiBtYi00IHRleHQtZ3JheS03MDAgZGFyazp0ZXh0LWdyYXktMzAwIHdoaXRlc3BhY2UtcHJlLXdyYXAgcHgtMlwiXG4gICAgICAgICAgIHYtaHRtbD1cImZvcm0uZGVzY3JpcHRpb25cIlxuICAgICAgICAvPlxuICAgICAgICA8b3Blbi1mb3JtIHYtaWY9XCJmb3JtXCJcbiAgICAgICAgICAgICAgICAgICAgIDpmb3JtPVwiZm9ybVwiXG4gICAgICAgICAgICAgICAgICAgICA6bG9hZGluZz1cImxvYWRpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgOmZpZWxkcz1cImZvcm0ucHJvcGVydGllc1wiXG4gICAgICAgICAgICAgICAgICAgICA6dGhlbWU9XCJ0aGVtZVwiXG4gICAgICAgICAgICAgICAgICAgICA6YWRtaW4tcHJldmlldz1cImFkbWluUHJldmlld1wiXG4gICAgICAgICAgICAgICAgICAgICBAc3VibWl0PVwic3VibWl0Rm9ybVwiXG4gICAgICAgID5cbiAgICAgICAgICA8dGVtcGxhdGUgI3N1Ym1pdC1idG49XCJ7c3VibWl0Rm9ybX1cIj5cbiAgICAgICAgICAgIDxvcGVuLWZvcm0tYnV0dG9uIDpsb2FkaW5nPVwibG9hZGluZ1wiIDp0aGVtZT1cInRoZW1lXCIgOmNvbG9yPVwiZm9ybS5jb2xvclwiIGNsYXNzPVwibXQtMiBweC04IG14LTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6Y2xhc3M9XCJzdWJtaXRCdXR0b25DbGFzc1wiIEBjbGljay5wcmV2ZW50PVwic3VibWl0Rm9ybVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHt7IGZvcm0uc3VibWl0X2J1dHRvbl90ZXh0IH19XG4gICAgICAgICAgICA8L29wZW4tZm9ybS1idXR0b24+XG4gICAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgICAgPC9vcGVuLWZvcm0+XG4gICAgICAgIDxwIHYtaWY9XCIhZm9ybS5ub19icmFuZGluZ1wiIGNsYXNzPVwidGV4dC1jZW50ZXIgdy1mdWxsIG10LTJcIj5cbiAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9vcG5mb3JtLmNvbT91dG1fc291cmNlPWZvcm0mdXRtX2NvbnRlbnQ9cG93ZXJlZF9ieVwiXG4gICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtZ3JheS01MDAgZGFyazp0ZXh0LWdyYXktNjAwIGRhcms6aG92ZXI6dGV4dC1ncmF5LTUwMCBjdXJzb3ItcG9pbnRlciBob3Zlcjp1bmRlcmxpbmUgdGV4dC14c1wiXG4gICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICA+UG93ZXJlZCBieSA8c3BhbiBjbGFzcz1cImZvbnQtc2VtaWJvbGRcIj48L3NwYW4+PC9hPlxuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgdi1lbHNlIGtleT1cInN1Ym1pdHRlZFwiIGNsYXNzPVwicHgtMlwiPlxuICAgICAgICA8cCBjbGFzcz1cImZvcm0tZGVzY3JpcHRpb24gdGV4dC1ncmF5LTcwMCBkYXJrOnRleHQtZ3JheS0zMDAgd2hpdGVzcGFjZS1wcmUtd3JhcFwiIHYtaHRtbD1cImZvcm0uc3VibWl0dGVkX3RleHQgXCIgLz5cbiAgICAgICAgPG9wZW4tZm9ybS1idXR0b24gdi1pZj1cImZvcm0ucmVfZmlsbGFibGVcIiA6dGhlbWU9XCJ0aGVtZVwiIDpjb2xvcj1cImZvcm0uY29sb3JcIiBjbGFzcz1cIm15LTRcIiBAY2xpY2s9XCJyZXN0YXJ0XCI+XG4gICAgICAgICAge3sgZm9ybS5yZV9maWxsX2J1dHRvbl90ZXh0IH19XG4gICAgICAgIDwvb3Blbi1mb3JtLWJ1dHRvbj5cbiAgICAgICAgPHAgdi1pZj1cImZvcm0uZWRpdGFibGVfc3VibWlzc2lvbnMgJiYgc3VibWlzc2lvbklkXCIgY2xhc3M9XCJtdC01XCI+XG4gICAgICAgICAgPGEgdGFyZ2V0PVwiX3BhcmVudFwiIDpocmVmPVwiZm9ybS5zaGFyZV91cmwrJz9zdWJtaXNzaW9uX2lkPScrc3VibWlzc2lvbklkXCIgY2xhc3M9XCJ0ZXh0LW50LWJsdWUgaG92ZXI6dW5kZXJsaW5lXCI+XG4gICAgICAgICAgICB7eyBmb3JtLmVkaXRhYmxlX3N1Ym1pc3Npb25zX2J1dHRvbl90ZXh0IH19XG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L3A+XG4gICAgICAgIDxwIHYtaWY9XCIhZm9ybS5ub19icmFuZGluZ1wiIGNsYXNzPVwibXQtNVwiPlxuICAgICAgICAgIDxhIHRhcmdldD1cIl9wYXJlbnRcIiBocmVmPVwiaHR0cHM6Ly9vcG5mb3JtLmNvbS8/dXRtX3NvdXJjZT1mb3JtJnV0bV9jb250ZW50PWNyZWF0ZV9mb3JtX2ZyZWVcIiBjbGFzcz1cInRleHQtbnQtYmx1ZSBob3Zlcjp1bmRlcmxpbmVcIj5DcmVhdGUgeW91ciBmb3JtIGZvciBmcmVlIHdpdGggPC9hPlxuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cbiAgICA8L3RyYW5zaXRpb24+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBGb3JtIGZyb20gJ3Zmb3JtJ1xuaW1wb3J0IE9wZW5Gb3JtIGZyb20gJy4vT3BlbkZvcm0udnVlJ1xuaW1wb3J0IE9wZW5Gb3JtQnV0dG9uIGZyb20gJy4vT3BlbkZvcm1CdXR0b24udnVlJ1xuaW1wb3J0IHsgdGhlbWVzIH0gZnJvbSAnfi9jb25maWcvZm9ybS10aGVtZXMuanMnXG5pbXBvcnQgVkJ1dHRvbiBmcm9tICcuLi8uLi9jb21tb24vQnV0dG9uLnZ1ZSdcbmltcG9ydCBWVHJhbnNpdGlvbiBmcm9tICcuLi8uLi9jb21tb24vdHJhbnNpdGlvbnMvVlRyYW5zaXRpb24udnVlJ1xuaW1wb3J0IEZvcm1QZW5kaW5nU3VibWlzc2lvbktleSBmcm9tICcuLi8uLi8uLi9taXhpbnMvZm9ybXMvZm9ybS1wZW5kaW5nLXN1Ym1pc3Npb24ta2V5LmpzJ1xuaW1wb3J0IEZvcm1DbGVhbmluZ3MgZnJvbSAnLi4vLi4vcGFnZXMvZm9ybXMvc2hvdy9Gb3JtQ2xlYW5pbmdzLnZ1ZSdcblxuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7IFZUcmFuc2l0aW9uLCBWQnV0dG9uLCBPcGVuRm9ybUJ1dHRvbiwgT3BlbkZvcm0sIEZvcm1DbGVhbmluZ3MgfSxcblxuICBwcm9wczoge1xuICAgIGZvcm06IHsgdHlwZTogT2JqZWN0LCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgIGNyZWF0aW5nOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sIC8vIElmIHRydWUsIGZha2UgZm9ybSBzdWJtaXRcbiAgICBhZG1pblByZXZpZXc6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSwgLy8gSWYgdXNlZCBpbiBGb3JtRWRpdG9yUHJldmlld1xuICAgIHN1Ym1pdEJ1dHRvbkNsYXNzOiB7IHR5cGU6IFN0cmluZywgZGVmYXVsdDogJycgfVxuICB9LFxuXG4gIG1peGluczogW0Zvcm1QZW5kaW5nU3VibWlzc2lvbktleV0sXG5cbiAgZGF0YSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgc3VibWl0dGVkOiBmYWxzZSxcbiAgICAgIHRoZW1lczogdGhlbWVzLFxuICAgICAgcGFzc3dvcmRGb3JtOiBuZXcgRm9ybSh7XG4gICAgICAgIHBhc3N3b3JkOiBudWxsXG4gICAgICB9KSxcbiAgICAgIGhpZGVQYXNzd29yZERpc2FibGVkTXNnOiBmYWxzZSxcbiAgICAgIHN1Ym1pc3Npb25JZDogZmFsc2VcbiAgICB9XG4gIH0sXG5cbiAgY29tcHV0ZWQ6IHtcbiAgICBpc0lmcmFtZSAoKSB7XG4gICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uICE9PSB3aW5kb3cucGFyZW50LmxvY2F0aW9uIHx8IHdpbmRvdy5mcmFtZUVsZW1lbnRcbiAgICB9LFxuICAgIGlzRW1iZWRQb3B1cCAoKSB7XG4gICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ3BvcHVwPXRydWUnKVxuICAgIH0sXG4gICAgdGhlbWUgKCkge1xuICAgICAgcmV0dXJuIHRoaXMudGhlbWVzW3RoaXMudGhlbWVzLmhhc093blByb3BlcnR5KHRoaXMuZm9ybS50aGVtZSkgPyB0aGlzLmZvcm0udGhlbWUgOiAnZGVmYXVsdCddXG4gICAgfSxcbiAgICBpc1B1YmxpY0Zvcm1QYWdlICgpIHtcbiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5uYW1lID09PSAnZm9ybXMuc2hvd19wdWJsaWMnXG4gICAgfSxcbiAgICBpc0hpZGVUaXRsZSAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5mb3JtLmhpZGVfdGl0bGUgfHwgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ2hpZGVfdGl0bGU9dHJ1ZScpXG4gICAgfVxuICB9LFxuXG4gIG1vdW50ZWQgKCkge1xuICB9LFxuXG4gIG1ldGhvZHM6IHtcbiAgICBzdWJtaXRGb3JtIChmb3JtLCBvbkZhaWx1cmUpIHtcbiAgICAgIGlmICh0aGlzLmNyZWF0aW5nKSB7XG4gICAgICAgIHRoaXMuc3VibWl0dGVkID0gdHJ1ZVxuICAgICAgICB0aGlzLiRlbWl0KCdzdWJtaXR0ZWQnLCB0cnVlKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZVxuICAgICAgdGhpcy5jbG9zZUFsZXJ0KClcbiAgICAgIGZvcm0ucG9zdCgnL2FwaS9mb3Jtcy8nICsgdGhpcy5mb3JtLnNsdWcgKyAnL2Fuc3dlcicpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHRoaXMuJGxvZ0V2ZW50KCdmb3JtX3N1Ym1pc3Npb24nLCB7XG4gICAgICAgICAgd29ya3NwYWNlX2lkOiB0aGlzLmZvcm0ud29ya3NwYWNlX2lkLFxuICAgICAgICAgIGZvcm1faWQ6IHRoaXMuZm9ybS5pZFxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICh0aGlzLmlzSWZyYW1lKSB7XG4gICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICB0eXBlOiAnZm9ybS1zdWJtaXR0ZWQnLFxuICAgICAgICAgICAgZm9ybToge1xuICAgICAgICAgICAgICBzbHVnOiB0aGlzLmZvcm0uc2x1ZyxcbiAgICAgICAgICAgICAgaWQ6IHRoaXMuZm9ybS5pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Ym1pc3Npb25fZGF0YTogZm9ybS5kYXRhKClcbiAgICAgICAgICB9LCAnKicpXG4gICAgICAgIH1cbiAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICB0eXBlOiAnZm9ybS1zdWJtaXR0ZWQnLFxuICAgICAgICAgIGZvcm06IHtcbiAgICAgICAgICAgIHNsdWc6IHRoaXMuZm9ybS5zbHVnLFxuICAgICAgICAgICAgaWQ6IHRoaXMuZm9ybS5pZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3VibWlzc2lvbl9kYXRhOiBmb3JtLmRhdGEoKVxuICAgICAgICB9LCAnKicpXG5cblxuICAgICAgICB0cnkge1xuICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLmZvcm1QZW5kaW5nU3VibWlzc2lvbktleSlcbiAgICAgICAgfSBjYXRjaCAoZSkge31cblxuICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5yZWRpcmVjdCAmJiByZXNwb25zZS5kYXRhLnJlZGlyZWN0X3VybCkge1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmVzcG9uc2UuZGF0YS5yZWRpcmVjdF91cmxcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Ym1pc3Npb25faWQpIHtcbiAgICAgICAgICB0aGlzLnN1Ym1pc3Npb25JZCA9IHJlc3BvbnNlLmRhdGEuc3VibWlzc2lvbl9pZFxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuJGVtaXQoJ3N1Ym1pdHRlZCcsIHRydWUpXG5cbiAgICAgICAgLy8gSWYgZW5hYmxlZCBkaXNwbGF5IGNvbmZldHRpXG4gICAgICAgIGlmKHRoaXMuZm9ybS5jb25mZXR0aV9vbl9zdWJtaXNzaW9uKXtcbiAgICAgICAgICB0aGlzLnBsYXlDb25mZXR0aSgpXG4gICAgICAgIH1cblxuICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGlmIChlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSkge1xuICAgICAgICAgIHRoaXMuYWxlcnRFcnJvcihlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2VcbiAgICAgICAgb25GYWlsdXJlKClcbiAgICAgIH0pXG4gICAgfSxcbiAgICByZXN0YXJ0ICgpIHtcbiAgICAgIHRoaXMuc3VibWl0dGVkID0gZmFsc2VcbiAgICAgIHRoaXMuJGVtaXQoJ3Jlc3RhcnRlZCcsIHRydWUpXG4gICAgfSxcbiAgICBwYXNzd29yZEVudGVyZWQgKCkge1xuICAgICAgaWYgKHRoaXMucGFzc3dvcmRGb3JtLnBhc3N3b3JkICE9PSAnJyAmJiB0aGlzLnBhc3N3b3JkRm9ybS5wYXNzd29yZCAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLiRlbWl0KCdwYXNzd29yZC1lbnRlcmVkJywgdGhpcy5wYXNzd29yZEZvcm0ucGFzc3dvcmQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmFkZFBhc3N3b3JkRXJyb3IoJ1RoZSBQYXNzd29yZCBmaWVsZCBpcyByZXF1aXJlZC4nKVxuICAgICAgfVxuICAgIH0sXG4gICAgYWRkUGFzc3dvcmRFcnJvciAobXNnKSB7XG4gICAgICB0aGlzLnBhc3N3b3JkRm9ybS5lcnJvcnMuc2V0KCdwYXNzd29yZCcsIG1zZylcbiAgICB9XG4gIH1cbn1cbjwvc2NyaXB0PlxuXG48c3R5bGUgbGFuZz1cInNjc3NcIj5cbi5vcGVuLWNvbXBsZXRlLWZvcm0ge1xuICAuZm9ybS1kZXNjcmlwdGlvbiwgLm5mLXRleHQge1xuICAgIG9sIHtcbiAgICAgIEBhcHBseSBsaXN0LWRlY2ltYWwgbGlzdC1pbnNpZGU7XG4gICAgICBtYXJnaW4tbGVmdDogMTBweDtcbiAgICB9XG5cbiAgICB1bCB7XG4gICAgICBAYXBwbHkgbGlzdC1kaXNjIGxpc3QtaW5zaWRlO1xuICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgfVxuICB9XG59XG48L3N0eWxlPlxuIl0sIm5hbWVzIjpbIl9zZmNfbWFpbiIsIlZUcmFuc2l0aW9uIiwiVkJ1dHRvbiIsIk9wZW5Gb3JtQnV0dG9uIiwiT3BlbkZvcm0iLCJGb3JtQ2xlYW5pbmdzIiwiRm9ybVBlbmRpbmdTdWJtaXNzaW9uS2V5IiwidGhlbWVzIiwiRm9ybSIsImZvcm0iLCJvbkZhaWx1cmUiLCJyZXNwb25zZSIsImUiLCJlcnJvciIsIm1zZyJdLCJtYXBwaW5ncyI6ImlNQXVIQSxNQUFBQSxFQUFBLENBQ0EsV0FBQSxDQUFBLFlBQUFDLEVBQUEsUUFBQUMsRUFBQSxlQUFBQyxFQUFBLFNBQUFDLEVBQUEsY0FBQUMsQ0FBQSxFQUVBLE1BQUEsQ0FDQSxLQUFBLENBQUEsS0FBQSxPQUFBLFNBQUEsRUFBQSxFQUNBLFNBQUEsQ0FBQSxLQUFBLFFBQUEsUUFBQSxFQUFBLEVBQ0EsYUFBQSxDQUFBLEtBQUEsUUFBQSxRQUFBLEVBQUEsRUFDQSxrQkFBQSxDQUFBLEtBQUEsT0FBQSxRQUFBLEVBQUEsQ0FDQSxFQUVBLE9BQUEsQ0FBQUMsQ0FBQSxFQUVBLE1BQUEsQ0FDQSxNQUFBLENBQ0EsUUFBQSxHQUNBLFVBQUEsR0FDQSxPQUFBQyxFQUNBLGFBQUEsSUFBQUMsRUFBQSxDQUNBLFNBQUEsSUFDQSxDQUFBLEVBQ0Esd0JBQUEsR0FDQSxhQUFBLEVBQ0EsQ0FDQSxFQUVBLFNBQUEsQ0FDQSxVQUFBLENBQ0EsT0FBQSxPQUFBLFdBQUEsT0FBQSxPQUFBLFVBQUEsT0FBQSxZQUNBLEVBQ0EsY0FBQSxDQUNBLE9BQUEsT0FBQSxTQUFBLEtBQUEsU0FBQSxZQUFBLENBQ0EsRUFDQSxPQUFBLENBQ0EsT0FBQSxLQUFBLE9BQUEsS0FBQSxPQUFBLGVBQUEsS0FBQSxLQUFBLEtBQUEsRUFBQSxLQUFBLEtBQUEsTUFBQSxTQUFBLENBQ0EsRUFDQSxrQkFBQSxDQUNBLE9BQUEsS0FBQSxPQUFBLE9BQUEsbUJBQ0EsRUFDQSxhQUFBLENBQ0EsT0FBQSxLQUFBLEtBQUEsWUFBQSxPQUFBLFNBQUEsS0FBQSxTQUFBLGlCQUFBLENBQ0EsQ0FDQSxFQUVBLFNBQUEsQ0FDQSxFQUVBLFFBQUEsQ0FDQSxXQUFBQyxFQUFBQyxFQUFBLENBQ0EsR0FBQSxLQUFBLFNBQUEsQ0FDQSxLQUFBLFVBQUEsR0FDQSxLQUFBLE1BQUEsWUFBQSxFQUFBLEVBQ0EsTUFDQSxDQUVBLEtBQUEsUUFBQSxHQUNBLEtBQUEsV0FBQSxFQUNBRCxFQUFBLEtBQUEsY0FBQSxLQUFBLEtBQUEsS0FBQSxTQUFBLEVBQUEsS0FBQUUsR0FBQSxDQUNBLEtBQUEsVUFBQSxrQkFBQSxDQUNBLGFBQUEsS0FBQSxLQUFBLGFBQ0EsUUFBQSxLQUFBLEtBQUEsRUFDQSxDQUFBLEVBRUEsS0FBQSxVQUNBLE9BQUEsT0FBQSxZQUFBLENBQ0EsS0FBQSxpQkFDQSxLQUFBLENBQ0EsS0FBQSxLQUFBLEtBQUEsS0FDQSxHQUFBLEtBQUEsS0FBQSxFQUNBLEVBQ0EsZ0JBQUFGLEVBQUEsS0FBQSxDQUNBLEVBQUEsR0FBQSxFQUVBLE9BQUEsWUFBQSxDQUNBLEtBQUEsaUJBQ0EsS0FBQSxDQUNBLEtBQUEsS0FBQSxLQUFBLEtBQ0EsR0FBQSxLQUFBLEtBQUEsRUFDQSxFQUNBLGdCQUFBQSxFQUFBLEtBQUEsQ0FDQSxFQUFBLEdBQUEsRUFHQSxHQUFBLENBQ0EsT0FBQSxhQUFBLFdBQUEsS0FBQSx3QkFBQSxDQUNBLE9BQUFHLEVBQUEsQ0FBQSxDQUVBRCxFQUFBLEtBQUEsVUFBQUEsRUFBQSxLQUFBLGVBQ0EsT0FBQSxTQUFBLEtBQUFBLEVBQUEsS0FBQSxjQUdBQSxFQUFBLEtBQUEsZ0JBQ0EsS0FBQSxhQUFBQSxFQUFBLEtBQUEsZUFHQSxLQUFBLFFBQUEsR0FDQSxLQUFBLFVBQUEsR0FDQSxLQUFBLE1BQUEsWUFBQSxFQUFBLEVBR0EsS0FBQSxLQUFBLHdCQUNBLEtBQUEsYUFBQSxDQUdBLENBQUEsRUFBQSxNQUFBRSxHQUFBLENBQ0FBLEVBQUEsU0FBQSxNQUFBQSxFQUFBLFNBQUEsS0FBQSxTQUNBLEtBQUEsV0FBQUEsRUFBQSxTQUFBLEtBQUEsT0FBQSxFQUVBLEtBQUEsUUFBQSxHQUNBSCxFQUFBLENBQ0EsQ0FBQSxDQUNBLEVBQ0EsU0FBQSxDQUNBLEtBQUEsVUFBQSxHQUNBLEtBQUEsTUFBQSxZQUFBLEVBQUEsQ0FDQSxFQUNBLGlCQUFBLENBQ0EsS0FBQSxhQUFBLFdBQUEsSUFBQSxLQUFBLGFBQUEsV0FBQSxLQUNBLEtBQUEsTUFBQSxtQkFBQSxLQUFBLGFBQUEsUUFBQSxFQUVBLEtBQUEsaUJBQUEsaUNBQUEsQ0FFQSxFQUNBLGlCQUFBSSxFQUFBLENBQ0EsS0FBQSxhQUFBLE9BQUEsSUFBQSxXQUFBQSxDQUFBLENBQ0EsQ0FDQSxDQUNBIn0=
