import{n as m,i as c}from"./app.js";const d={input:"rounded-lg border-transparent flex-1 appearance-none border border-gray-300 w-full py-2 px-4 bg-white text-gray-700 dark:bg-notion-dark-light dark:text-gray-300 dark:placeholder-gray-500 placeholder-gray-400 shadow-sm text-base focus:outline-none focus:ring-1 focus:ring-opacity-100 focus:border-transparent focus:ring-2 ring-blue-500",navigator:"flex",navigatorViewButton:"flex items-center",navigatorViewButtonIcon:"flex-shrink-0 h-5 w-5",navigatorViewButtonBackIcon:"flex-shrink-0 h-5 w-5",navigatorLabel:"flex items-center py-1",navigatorPrevButtonIcon:"h-6 w-6 inline-flex",navigatorNextButtonIcon:"h-6 w-6 inline-flex",inputWrapper:"relative",viewGroup:"inline-flex flex-wrap",view:"w-64",calendarDaysWrapper:"grid grid-cols-7",calendarHeaderWrapper:"grid grid-cols-7",monthWrapper:"grid grid-cols-4",yearWrapper:"grid grid-cols-4",clearButton:"flex flex-shrink-0 items-center justify-center absolute right-0 top-0 m-2 h-6 w-6",clearButtonIcon:"fill-current h-3 w-3"},u={name:"DateInput",mixins:[c],props:{withTime:{type:Boolean,default:!1},dateRange:{type:Boolean,default:!1},disablePastDates:{type:Boolean,default:!1},disableFutureDates:{type:Boolean,default:!1}},data:()=>({fixedClasses:d,fromDate:null,toDate:null}),computed:{inputClasses(){let a="border border-gray-300 dark:bg-notion-dark-light dark:border-gray-600 dark:placeholder-gray-500 dark:text-gray-300 flex-1 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-opacity-100 placeholder-gray-400 px-4 py-2 rounded-lg shadow-sm text-base text-black text-gray-700";return a+=this.dateRange?" w-50":" w-full",a+=this.disabled?" !cursor-not-allowed !bg-gray-200":"",a},useTime(){return this.withTime&&!this.dateRange},setMinDate(){return this.disablePastDates?new Date().toISOString().split("T")[0]:!1},setMaxDate(){return this.disableFutureDates?new Date().toISOString().split("T")[0]:!1}},watch:{color:{handler(){this.setInputColor()},immediate:!0},fromDate:{handler(a){this.dateRange?(Array.isArray(this.compVal)||(this.compVal=[]),this.compVal[0]=this.dateToUTC(a)):this.compVal=this.dateToUTC(a)},immediate:!1},toDate:{handler(a){this.dateRange?(Array.isArray(this.compVal)||(this.compVal=[null]),this.compVal[1]=this.dateToUTC(a)):this.compVal=null},immediate:!1}},mounted(){var a,e;this.compVal&&(Array.isArray(this.compVal)?(this.fromDate=(a=this.compVal[0])!=null?a:null,this.toDate=(e=this.compVal[1])!=null?e:null):this.fromDate=this.dateToLocal(this.compVal)),d.input=this.theme.default.input,this.setInputColor()},methods:{onEnterPress(a){return a.preventDefault(),!1},setInputColor(){this.$refs.datepicker&&this.$refs.datepicker.$el.getElementsByTagName("input")[0].style.setProperty("--tw-ring-color",this.color)},dateToUTC(a){return a?this.useTime?new Date(a).toISOString():a:null},dateToLocal(a){if(!a)return null;const e=new Date(a);let t=e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0");return this.useTime&&(t+="T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")),t}}};var p=function(){var e=this,t=e._self._c;return t("div",{class:e.wrapperClass},[e.label?t("label",{class:[e.theme.default.label,{"uppercase text-xs":e.uppercaseLabels,"text-sm":!e.uppercaseLabels}],attrs:{for:e.id?e.id:e.name}},[e._v(" "+e._s(e.label)+" "),e.required?t("span",{staticClass:"text-red-500 required-dot"},[e._v("*")]):e._e()]):e._e(),e.help&&e.helpPosition=="above_input"?t("small",{staticClass:"flex mb-1",class:e.theme.default.help},[e._t("help",function(){return[t("span",{staticClass:"field-help",domProps:{innerHTML:e._s(e.help)}})]})],2):e._e(),e.dateRange?t("div",{class:e.inputClasses},[t("div",{staticClass:"flex -mx-2"},[t("p",{staticClass:"text-gray-900 px-4"},[e._v("From")]),(e.useTime?"datetime-local":"date")=="checkbox"?t("input",{directives:[{name:"model",rawName:"v-model",value:e.fromDate,expression:"fromDate"}],staticClass:"flex-grow border-transparent focus:outline-none",style:e.inputStyle,attrs:{id:e.id?e.id:e.name,disabled:e.disabled,name:e.name,"data-date-format":"YYYY-MM-DD",min:e.setMinDate,max:e.setMaxDate,type:"checkbox"},domProps:{checked:Array.isArray(e.fromDate)?e._i(e.fromDate,null)>-1:e.fromDate},on:{change:function(r){var s=e.fromDate,n=r.target,o=!!n.checked;if(Array.isArray(s)){var l=null,i=e._i(s,l);n.checked?i<0&&(e.fromDate=s.concat([l])):i>-1&&(e.fromDate=s.slice(0,i).concat(s.slice(i+1)))}else e.fromDate=o}}}):(e.useTime?"datetime-local":"date")=="radio"?t("input",{directives:[{name:"model",rawName:"v-model",value:e.fromDate,expression:"fromDate"}],staticClass:"flex-grow border-transparent focus:outline-none",style:e.inputStyle,attrs:{id:e.id?e.id:e.name,disabled:e.disabled,name:e.name,"data-date-format":"YYYY-MM-DD",min:e.setMinDate,max:e.setMaxDate,type:"radio"},domProps:{checked:e._q(e.fromDate,null)},on:{change:function(r){e.fromDate=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.fromDate,expression:"fromDate"}],staticClass:"flex-grow border-transparent focus:outline-none",style:e.inputStyle,attrs:{id:e.id?e.id:e.name,disabled:e.disabled,name:e.name,"data-date-format":"YYYY-MM-DD",min:e.setMinDate,max:e.setMaxDate,type:e.useTime?"datetime-local":"date"},domProps:{value:e.fromDate},on:{input:function(r){r.target.composing||(e.fromDate=r.target.value)}}}),t("p",{staticClass:"text-gray-900 px-4"},[e._v("To")]),(e.useTime?"datetime-local":"date")=="checkbox"&&e.dateRange?t("input",{directives:[{name:"model",rawName:"v-model",value:e.toDate,expression:"toDate"}],staticClass:"flex-grow border-transparent focus:outline-none",style:e.inputStyle,attrs:{id:e.id?e.id:e.name,disabled:e.disabled,name:e.name,min:e.setMinDate,max:e.setMaxDate,type:"checkbox"},domProps:{checked:Array.isArray(e.toDate)?e._i(e.toDate,null)>-1:e.toDate},on:{change:function(r){var s=e.toDate,n=r.target,o=!!n.checked;if(Array.isArray(s)){var l=null,i=e._i(s,l);n.checked?i<0&&(e.toDate=s.concat([l])):i>-1&&(e.toDate=s.slice(0,i).concat(s.slice(i+1)))}else e.toDate=o}}}):(e.useTime?"datetime-local":"date")=="radio"&&e.dateRange?t("input",{directives:[{name:"model",rawName:"v-model",value:e.toDate,expression:"toDate"}],staticClass:"flex-grow border-transparent focus:outline-none",style:e.inputStyle,attrs:{id:e.id?e.id:e.name,disabled:e.disabled,name:e.name,min:e.setMinDate,max:e.setMaxDate,type:"radio"},domProps:{checked:e._q(e.toDate,null)},on:{change:function(r){e.toDate=null}}}):e.dateRange?t("input",{directives:[{name:"model",rawName:"v-model",value:e.toDate,expression:"toDate"}],staticClass:"flex-grow border-transparent focus:outline-none",style:e.inputStyle,attrs:{id:e.id?e.id:e.name,disabled:e.disabled,name:e.name,min:e.setMinDate,max:e.setMaxDate,type:e.useTime?"datetime-local":"date"},domProps:{value:e.toDate},on:{input:function(r){r.target.composing||(e.toDate=r.target.value)}}}):e._e()])]):t("div",{staticClass:"flex"},[(e.useTime?"datetime-local":"date")=="checkbox"?t("input",{directives:[{name:"model",rawName:"v-model",value:e.fromDate,expression:"fromDate"}],class:e.inputClasses,style:e.inputStyle,attrs:{id:e.id?e.id:e.name,disabled:e.disabled,name:e.name,"data-date-format":"YYYY-MM-DD",min:e.setMinDate,max:e.setMaxDate,type:"checkbox"},domProps:{checked:Array.isArray(e.fromDate)?e._i(e.fromDate,null)>-1:e.fromDate},on:{change:function(r){var s=e.fromDate,n=r.target,o=!!n.checked;if(Array.isArray(s)){var l=null,i=e._i(s,l);n.checked?i<0&&(e.fromDate=s.concat([l])):i>-1&&(e.fromDate=s.slice(0,i).concat(s.slice(i+1)))}else e.fromDate=o}}}):(e.useTime?"datetime-local":"date")=="radio"?t("input",{directives:[{name:"model",rawName:"v-model",value:e.fromDate,expression:"fromDate"}],class:e.inputClasses,style:e.inputStyle,attrs:{id:e.id?e.id:e.name,disabled:e.disabled,name:e.name,"data-date-format":"YYYY-MM-DD",min:e.setMinDate,max:e.setMaxDate,type:"radio"},domProps:{checked:e._q(e.fromDate,null)},on:{change:function(r){e.fromDate=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.fromDate,expression:"fromDate"}],class:e.inputClasses,style:e.inputStyle,attrs:{id:e.id?e.id:e.name,disabled:e.disabled,name:e.name,"data-date-format":"YYYY-MM-DD",min:e.setMinDate,max:e.setMaxDate,type:e.useTime?"datetime-local":"date"},domProps:{value:e.fromDate},on:{input:function(r){r.target.composing||(e.fromDate=r.target.value)}}})]),e.help&&e.helpPosition=="below_input"?t("small",{class:e.theme.default.help},[e._t("help",function(){return[t("span",{staticClass:"field-help",domProps:{innerHTML:e._s(e.help)}})]})],2):e._e(),e.hasValidation?t("has-error",{attrs:{form:e.form,field:e.name}}):e._e()],1)},f=[],h=m(u,p,f,!1,null,null,null,null);const g=h.exports;export{g as default};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0ZUlucHV0LmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9yZXNvdXJjZXMvanMvcGx1Z2lucy9jb25maWcvdnVlLXRhaWx3aW5kL2RhdGVQaWNrZXIuanMiLCIuLi8uLi8uLi9yZXNvdXJjZXMvanMvY29tcG9uZW50cy9mb3Jtcy9EYXRlSW5wdXQudnVlIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBmaXhlZENsYXNzZXMgPSB7XG4gIGlucHV0OiAncm91bmRlZC1sZyBib3JkZXItdHJhbnNwYXJlbnQgZmxleC0xIGFwcGVhcmFuY2Utbm9uZSBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHctZnVsbCBweS0yIHB4LTQgYmctd2hpdGUgdGV4dC1ncmF5LTcwMCBkYXJrOmJnLW5vdGlvbi1kYXJrLWxpZ2h0IGRhcms6dGV4dC1ncmF5LTMwMCBkYXJrOnBsYWNlaG9sZGVyLWdyYXktNTAwIHBsYWNlaG9sZGVyLWdyYXktNDAwIHNoYWRvdy1zbSB0ZXh0LWJhc2UgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMSBmb2N1czpyaW5nLW9wYWNpdHktMTAwIGZvY3VzOmJvcmRlci10cmFuc3BhcmVudCBmb2N1czpyaW5nLTIgcmluZy1ibHVlLTUwMCcsXG4gIG5hdmlnYXRvcjogJ2ZsZXgnLFxuICBuYXZpZ2F0b3JWaWV3QnV0dG9uOiAnZmxleCBpdGVtcy1jZW50ZXInLFxuICBuYXZpZ2F0b3JWaWV3QnV0dG9uSWNvbjogJ2ZsZXgtc2hyaW5rLTAgaC01IHctNScsXG4gIG5hdmlnYXRvclZpZXdCdXR0b25CYWNrSWNvbjogJ2ZsZXgtc2hyaW5rLTAgaC01IHctNScsXG4gIG5hdmlnYXRvckxhYmVsOiAnZmxleCBpdGVtcy1jZW50ZXIgcHktMScsXG4gIG5hdmlnYXRvclByZXZCdXR0b25JY29uOiAnaC02IHctNiBpbmxpbmUtZmxleCcsXG4gIG5hdmlnYXRvck5leHRCdXR0b25JY29uOiAnaC02IHctNiBpbmxpbmUtZmxleCcsXG4gIGlucHV0V3JhcHBlcjogJ3JlbGF0aXZlJyxcbiAgdmlld0dyb3VwOiAnaW5saW5lLWZsZXggZmxleC13cmFwJyxcbiAgdmlldzogJ3ctNjQnLFxuICBjYWxlbmRhckRheXNXcmFwcGVyOiAnZ3JpZCBncmlkLWNvbHMtNycsXG4gIGNhbGVuZGFySGVhZGVyV3JhcHBlcjogJ2dyaWQgZ3JpZC1jb2xzLTcnLFxuICBtb250aFdyYXBwZXI6ICdncmlkIGdyaWQtY29scy00JyxcbiAgeWVhcldyYXBwZXI6ICdncmlkIGdyaWQtY29scy00JyxcbiAgY2xlYXJCdXR0b246ICdmbGV4IGZsZXgtc2hyaW5rLTAgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGFic29sdXRlIHJpZ2h0LTAgdG9wLTAgbS0yIGgtNiB3LTYnLFxuICBjbGVhckJ1dHRvbkljb246ICdmaWxsLWN1cnJlbnQgaC0zIHctMydcbn1cbiIsIjx0ZW1wbGF0ZT5cbiAgPGRpdiA6Y2xhc3M9XCJ3cmFwcGVyQ2xhc3NcIj5cbiAgICA8bGFiZWwgdi1pZj1cImxhYmVsXCIgOmZvcj1cImlkP2lkOm5hbWVcIlxuICAgICAgICAgICA6Y2xhc3M9XCJbdGhlbWUuZGVmYXVsdC5sYWJlbCx7J3VwcGVyY2FzZSB0ZXh0LXhzJzp1cHBlcmNhc2VMYWJlbHMsICd0ZXh0LXNtJzohdXBwZXJjYXNlTGFiZWxzfV1cIlxuICAgID5cbiAgICAgIHt7IGxhYmVsIH19XG4gICAgICA8c3BhbiB2LWlmPVwicmVxdWlyZWRcIiBjbGFzcz1cInRleHQtcmVkLTUwMCByZXF1aXJlZC1kb3RcIj4qPC9zcGFuPlxuICAgIDwvbGFiZWw+XG4gICAgPHNtYWxsIHYtaWY9XCJoZWxwICYmIGhlbHBQb3NpdGlvbj09J2Fib3ZlX2lucHV0J1wiIDpjbGFzcz1cInRoZW1lLmRlZmF1bHQuaGVscFwiIGNsYXNzPVwiZmxleCBtYi0xXCI+XG4gICAgICA8c2xvdCBuYW1lPVwiaGVscFwiPjxzcGFuIGNsYXNzPVwiZmllbGQtaGVscFwiIHYtaHRtbD1cImhlbHBcIiAvPjwvc2xvdD5cbiAgICA8L3NtYWxsPlxuXG4gICAgPGRpdiBjbGFzcz1cImZsZXhcIiB2LWlmPVwiIWRhdGVSYW5nZVwiPlxuICAgICAgPGlucHV0IDp0eXBlPVwidXNlVGltZSA/ICdkYXRldGltZS1sb2NhbCcgOiAnZGF0ZSdcIiA6aWQ9XCJpZD9pZDpuYW1lXCIgdi1tb2RlbD1cImZyb21EYXRlXCIgOmNsYXNzPVwiaW5wdXRDbGFzc2VzXCIgOmRpc2FibGVkPVwiZGlzYWJsZWRcIlxuICAgICAgICAgIDpzdHlsZT1cImlucHV0U3R5bGVcIiA6bmFtZT1cIm5hbWVcIiBkYXRhLWRhdGUtZm9ybWF0PVwiWVlZWS1NTS1ERFwiXG4gICAgICAgICAgOm1pbj1cInNldE1pbkRhdGVcIiA6bWF4PVwic2V0TWF4RGF0ZVwiXG4gICAgICAvPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgOmNsYXNzPVwiaW5wdXRDbGFzc2VzXCIgdi1lbHNlPlxuICAgICAgPGRpdiBjbGFzcz1cImZsZXggLW14LTJcIj5cbiAgICAgIDxwIGNsYXNzPVwidGV4dC1ncmF5LTkwMCBweC00XCI+RnJvbTwvcD5cbiAgICAgIDxpbnB1dCA6dHlwZT1cInVzZVRpbWUgPyAnZGF0ZXRpbWUtbG9jYWwnIDogJ2RhdGUnXCIgOmlkPVwiaWQ/aWQ6bmFtZVwiIHYtbW9kZWw9XCJmcm9tRGF0ZVwiIDpkaXNhYmxlZD1cImRpc2FibGVkXCJcbiAgICAgICAgICAgICA6c3R5bGU9XCJpbnB1dFN0eWxlXCIgOm5hbWU9XCJuYW1lXCIgZGF0YS1kYXRlLWZvcm1hdD1cIllZWVktTU0tRERcIiBjbGFzcz1cImZsZXgtZ3JvdyBib3JkZXItdHJhbnNwYXJlbnQgZm9jdXM6b3V0bGluZS1ub25lIFwiXG4gICAgICAgICAgICAgOm1pbj1cInNldE1pbkRhdGVcIiA6bWF4PVwic2V0TWF4RGF0ZVwiXG4gICAgICAvPlxuICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWdyYXktOTAwIHB4LTRcIj5UbzwvcD5cbiAgICAgIDxpbnB1dCB2LWlmPVwiZGF0ZVJhbmdlXCIgOnR5cGU9XCJ1c2VUaW1lID8gJ2RhdGV0aW1lLWxvY2FsJyA6ICdkYXRlJ1wiIDppZD1cImlkP2lkOm5hbWVcIiB2LW1vZGVsPVwidG9EYXRlXCIgOmRpc2FibGVkPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgIDpzdHlsZT1cImlucHV0U3R5bGVcIiA6bmFtZT1cIm5hbWVcIiBjbGFzcz1cImZsZXgtZ3JvdyBib3JkZXItdHJhbnNwYXJlbnQgZm9jdXM6b3V0bGluZS1ub25lXCJcbiAgICAgICAgICAgICA6bWluPVwic2V0TWluRGF0ZVwiIDptYXg9XCJzZXRNYXhEYXRlXCJcbiAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxzbWFsbCB2LWlmPVwiaGVscCAmJiBoZWxwUG9zaXRpb249PSdiZWxvd19pbnB1dCdcIiA6Y2xhc3M9XCJ0aGVtZS5kZWZhdWx0LmhlbHBcIj5cbiAgICAgIDxzbG90IG5hbWU9XCJoZWxwXCI+PHNwYW4gY2xhc3M9XCJmaWVsZC1oZWxwXCIgdi1odG1sPVwiaGVscFwiIC8+PC9zbG90PlxuICAgIDwvc21hbGw+XG4gICAgPGhhcy1lcnJvciB2LWlmPVwiaGFzVmFsaWRhdGlvblwiIDpmb3JtPVwiZm9ybVwiIDpmaWVsZD1cIm5hbWVcIi8+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCB7Zml4ZWRDbGFzc2VzfSBmcm9tICcuLi8uLi9wbHVnaW5zL2NvbmZpZy92dWUtdGFpbHdpbmQvZGF0ZVBpY2tlci5qcydcbmltcG9ydCBpbnB1dE1peGluIGZyb20gJ34vbWl4aW5zL2Zvcm1zL2lucHV0LmpzJ1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG5hbWU6ICdEYXRlSW5wdXQnLFxuICBtaXhpbnM6IFtpbnB1dE1peGluXSxcblxuICBwcm9wczoge1xuICAgIHdpdGhUaW1lOiB7dHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2V9LFxuICAgIGRhdGVSYW5nZToge3R5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlfSxcbiAgICBkaXNhYmxlUGFzdERhdGVzOiB7dHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2V9LFxuICAgIGRpc2FibGVGdXR1cmVEYXRlczoge3R5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlfVxuICB9LFxuXG4gIGRhdGE6ICgpID0+ICh7XG4gICAgZml4ZWRDbGFzc2VzOiBmaXhlZENsYXNzZXMsXG4gICAgZnJvbURhdGU6IG51bGwsXG4gICAgdG9EYXRlOiBudWxsXG4gIH0pLFxuXG4gIGNvbXB1dGVkOiB7XG4gICAgaW5wdXRDbGFzc2VzICgpe1xuICAgICAgbGV0IHN0ciA9ICdib3JkZXIgYm9yZGVyLWdyYXktMzAwIGRhcms6Ymctbm90aW9uLWRhcmstbGlnaHQgZGFyazpib3JkZXItZ3JheS02MDAgZGFyazpwbGFjZWhvbGRlci1ncmF5LTUwMCBkYXJrOnRleHQtZ3JheS0zMDAgZmxleC0xIGZvY3VzOmJvcmRlci10cmFuc3BhcmVudCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctb3BhY2l0eS0xMDAgcGxhY2Vob2xkZXItZ3JheS00MDAgcHgtNCBweS0yIHJvdW5kZWQtbGcgc2hhZG93LXNtIHRleHQtYmFzZSB0ZXh0LWJsYWNrIHRleHQtZ3JheS03MDAnXG4gICAgICBzdHIgKz0gdGhpcy5kYXRlUmFuZ2UgPyAnIHctNTAnIDogJyB3LWZ1bGwnXG4gICAgICBzdHIgKz0gdGhpcy5kaXNhYmxlZCA/ICcgIWN1cnNvci1ub3QtYWxsb3dlZCAhYmctZ3JheS0yMDAnIDogJydcbiAgICAgIHJldHVybiBzdHJcbiAgICB9LFxuICAgIHVzZVRpbWUoKSB7XG4gICAgICByZXR1cm4gdGhpcy53aXRoVGltZSAmJiAhdGhpcy5kYXRlUmFuZ2VcbiAgICB9LFxuICAgIHNldE1pbkRhdGUgKCkge1xuICAgICAgaWYgKHRoaXMuZGlzYWJsZVBhc3REYXRlcykge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0sXG4gICAgc2V0TWF4RGF0ZSAoKSB7XG4gICAgICBpZiAodGhpcy5kaXNhYmxlRnV0dXJlRGF0ZXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdXG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH0sXG5cbiAgd2F0Y2g6IHtcbiAgICBjb2xvcjoge1xuICAgICAgaGFuZGxlcigpIHtcbiAgICAgICAgdGhpcy5zZXRJbnB1dENvbG9yKClcbiAgICAgIH0sXG4gICAgICBpbW1lZGlhdGU6IHRydWVcbiAgICB9LFxuICAgIGZyb21EYXRlOiB7XG4gICAgICBoYW5kbGVyKHZhbCkge1xuICAgICAgICBpZih0aGlzLmRhdGVSYW5nZSl7XG4gICAgICAgICAgaWYoIUFycmF5LmlzQXJyYXkodGhpcy5jb21wVmFsKSl7XG4gICAgICAgICAgICB0aGlzLmNvbXBWYWwgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5jb21wVmFsWzBdID0gdGhpcy5kYXRlVG9VVEModmFsKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICB0aGlzLmNvbXBWYWwgPSB0aGlzLmRhdGVUb1VUQyh2YWwpXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpbW1lZGlhdGU6IGZhbHNlXG4gICAgfSxcbiAgICB0b0RhdGU6IHtcbiAgICAgIGhhbmRsZXIodmFsKSB7XG4gICAgICAgIGlmKHRoaXMuZGF0ZVJhbmdlKXtcbiAgICAgICAgICBpZighQXJyYXkuaXNBcnJheSh0aGlzLmNvbXBWYWwpKXtcbiAgICAgICAgICAgIHRoaXMuY29tcFZhbCA9IFtudWxsXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5jb21wVmFsWzFdID0gdGhpcy5kYXRlVG9VVEModmFsKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICB0aGlzLmNvbXBWYWwgPSBudWxsXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpbW1lZGlhdGU6IGZhbHNlXG4gICAgfVxuICB9LFxuXG4gIG1vdW50ZWQoKSB7XG4gICAgaWYodGhpcy5jb21wVmFsKXtcbiAgICAgIGlmKEFycmF5LmlzQXJyYXkodGhpcy5jb21wVmFsKSl7XG4gICAgICAgIHRoaXMuZnJvbURhdGUgPSB0aGlzLmNvbXBWYWxbMF0gPz8gbnVsbFxuICAgICAgICB0aGlzLnRvRGF0ZSA9IHRoaXMuY29tcFZhbFsxXSA/PyBudWxsXG4gICAgICB9ZWxzZXtcbiAgICAgICAgdGhpcy5mcm9tRGF0ZSA9IHRoaXMuZGF0ZVRvTG9jYWwodGhpcy5jb21wVmFsKVxuICAgICAgfVxuICAgIH1cblxuICAgIGZpeGVkQ2xhc3Nlcy5pbnB1dCA9IHRoaXMudGhlbWUuZGVmYXVsdC5pbnB1dFxuICAgIHRoaXMuc2V0SW5wdXRDb2xvcigpXG4gIH0sXG5cbiAgbWV0aG9kczoge1xuICAgIC8qKlxuICAgICAqIFByZXNzaW5nIGVudGVyIHdvbid0IHN1Ym1pdCBmb3JtXG4gICAgICogQHBhcmFtIGV2ZW50XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgb25FbnRlclByZXNzKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9LFxuICAgIHNldElucHV0Q29sb3IoKSB7XG4gICAgICBpZiAodGhpcy4kcmVmcy5kYXRlcGlja2VyKSB7XG4gICAgICAgIGNvbnN0IGRhdGVJbnB1dCA9IHRoaXMuJHJlZnMuZGF0ZXBpY2tlci4kZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JylbMF1cbiAgICAgICAgZGF0ZUlucHV0LnN0eWxlLnNldFByb3BlcnR5KCctLXR3LXJpbmctY29sb3InLCB0aGlzLmNvbG9yKVxuICAgICAgfVxuICAgIH0sXG4gICAgZGF0ZVRvVVRDKHZhbCl7XG4gICAgICBpZighdmFsKXtcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgIH1cbiAgICAgIGlmKCF0aGlzLnVzZVRpbWUpe1xuICAgICAgICByZXR1cm4gdmFsXG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IERhdGUodmFsKS50b0lTT1N0cmluZygpXG4gICAgfSxcbiAgICBkYXRlVG9Mb2NhbCh2YWwpe1xuICAgICAgaWYoIXZhbCl7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG4gICAgICBjb25zdCBkYXRlT2JqID0gbmV3IERhdGUodmFsKVxuICAgICAgbGV0IGRhdGVTdHIgPSBkYXRlT2JqLmdldEZ1bGxZZWFyKCkgKyAnLScgK1xuICAgICAgICAgICAgICAgICAgU3RyaW5nKGRhdGVPYmouZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJykgKyAnLScgK1xuICAgICAgICAgICAgICAgICAgU3RyaW5nKGRhdGVPYmouZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpXG4gICAgICBpZih0aGlzLnVzZVRpbWUpe1xuICAgICAgICBkYXRlU3RyICs9ICdUJyArIFN0cmluZyhkYXRlT2JqLmdldEhvdXJzKCkpLnBhZFN0YXJ0KDIsICcwJykgKyAnOicgK1xuICAgICAgICBTdHJpbmcoZGF0ZU9iai5nZXRNaW51dGVzKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0ZVN0clxuICAgIH1cbiAgfVxufVxuPC9zY3JpcHQ+XG4iXSwibmFtZXMiOlsiZml4ZWRDbGFzc2VzIiwiX3NmY19tYWluIiwiaW5wdXRNaXhpbiIsInN0ciIsInZhbCIsIl9hIiwiX2IiLCJldmVudCIsImRhdGVPYmoiLCJkYXRlU3RyIl0sIm1hcHBpbmdzIjoib0NBQU8sTUFBTUEsRUFBZSxDQUMxQixNQUFPLGlWQUNQLFVBQVcsT0FDWCxvQkFBcUIsb0JBQ3JCLHdCQUF5Qix3QkFDekIsNEJBQTZCLHdCQUM3QixlQUFnQix5QkFDaEIsd0JBQXlCLHNCQUN6Qix3QkFBeUIsc0JBQ3pCLGFBQWMsV0FDZCxVQUFXLHdCQUNYLEtBQU0sT0FDTixvQkFBcUIsbUJBQ3JCLHNCQUF1QixtQkFDdkIsYUFBYyxtQkFDZCxZQUFhLG1CQUNiLFlBQWEsb0ZBQ2IsZ0JBQWlCLHNCQUNuQixFQzBCQUMsRUFBQSxDQUNBLEtBQUEsWUFDQSxPQUFBLENBQUFDLENBQUEsRUFFQSxNQUFBLENBQ0EsU0FBQSxDQUFBLEtBQUEsUUFBQSxRQUFBLEVBQUEsRUFDQSxVQUFBLENBQUEsS0FBQSxRQUFBLFFBQUEsRUFBQSxFQUNBLGlCQUFBLENBQUEsS0FBQSxRQUFBLFFBQUEsRUFBQSxFQUNBLG1CQUFBLENBQUEsS0FBQSxRQUFBLFFBQUEsRUFBQSxDQUNBLEVBRUEsS0FBQSxLQUFBLENBQ0EsYUFBQUYsRUFDQSxTQUFBLEtBQ0EsT0FBQSxJQUNBLEdBRUEsU0FBQSxDQUNBLGNBQUEsQ0FDQSxJQUFBRyxFQUFBLG1TQUNBLE9BQUFBLEdBQUEsS0FBQSxVQUFBLFFBQUEsVUFDQUEsR0FBQSxLQUFBLFNBQUEsb0NBQUEsR0FDQUEsQ0FDQSxFQUNBLFNBQUEsQ0FDQSxPQUFBLEtBQUEsVUFBQSxDQUFBLEtBQUEsU0FDQSxFQUNBLFlBQUEsQ0FDQSxPQUFBLEtBQUEsaUJBQ0EsSUFBQSxLQUFBLEVBQUEsWUFBQSxFQUFBLE1BQUEsR0FBQSxFQUFBLENBQUEsRUFFQSxFQUNBLEVBQ0EsWUFBQSxDQUNBLE9BQUEsS0FBQSxtQkFDQSxJQUFBLEtBQUEsRUFBQSxZQUFBLEVBQUEsTUFBQSxHQUFBLEVBQUEsQ0FBQSxFQUVBLEVBQ0EsQ0FDQSxFQUVBLE1BQUEsQ0FDQSxNQUFBLENBQ0EsU0FBQSxDQUNBLEtBQUEsY0FBQSxDQUNBLEVBQ0EsVUFBQSxFQUNBLEVBQ0EsU0FBQSxDQUNBLFFBQUFDLEVBQUEsQ0FDQSxLQUFBLFdBQ0EsTUFBQSxRQUFBLEtBQUEsT0FBQSxJQUNBLEtBQUEsUUFBQSxJQUVBLEtBQUEsUUFBQSxDQUFBLEVBQUEsS0FBQSxVQUFBQSxDQUFBLEdBRUEsS0FBQSxRQUFBLEtBQUEsVUFBQUEsQ0FBQSxDQUVBLEVBQ0EsVUFBQSxFQUNBLEVBQ0EsT0FBQSxDQUNBLFFBQUFBLEVBQUEsQ0FDQSxLQUFBLFdBQ0EsTUFBQSxRQUFBLEtBQUEsT0FBQSxJQUNBLEtBQUEsUUFBQSxDQUFBLElBQUEsR0FFQSxLQUFBLFFBQUEsQ0FBQSxFQUFBLEtBQUEsVUFBQUEsQ0FBQSxHQUVBLEtBQUEsUUFBQSxJQUVBLEVBQ0EsVUFBQSxFQUNBLENBQ0EsRUFFQSxTQUFBLFNBQ0EsS0FBQSxVQUNBLE1BQUEsUUFBQSxLQUFBLE9BQUEsR0FDQSxLQUFBLFVBQUFDLEVBQUEsS0FBQSxRQUFBLENBQUEsSUFBQSxLQUFBQSxFQUFBLEtBQ0EsS0FBQSxRQUFBQyxFQUFBLEtBQUEsUUFBQSxDQUFBLElBQUEsS0FBQUEsRUFBQSxNQUVBLEtBQUEsU0FBQSxLQUFBLFlBQUEsS0FBQSxPQUFBLEdBSUFOLEVBQUEsTUFBQSxLQUFBLE1BQUEsUUFBQSxNQUNBLEtBQUEsY0FBQSxDQUNBLEVBRUEsUUFBQSxDQU1BLGFBQUFPLEVBQUEsQ0FDQSxPQUFBQSxFQUFBLGVBQUEsRUFDQSxFQUNBLEVBQ0EsZUFBQSxDQUNBLEtBQUEsTUFBQSxZQUNBLEtBQUEsTUFBQSxXQUFBLElBQUEscUJBQUEsT0FBQSxFQUFBLENBQUEsRUFDQSxNQUFBLFlBQUEsa0JBQUEsS0FBQSxLQUFBLENBRUEsRUFDQSxVQUFBSCxFQUFBLENBQ0EsT0FBQUEsRUFHQSxLQUFBLFFBR0EsSUFBQSxLQUFBQSxDQUFBLEVBQUEsWUFBQSxFQUZBQSxFQUhBLElBTUEsRUFDQSxZQUFBQSxFQUFBLENBQ0EsR0FBQSxDQUFBQSxFQUNBLE9BQUEsS0FFQSxNQUFBSSxFQUFBLElBQUEsS0FBQUosQ0FBQSxFQUNBLElBQUFLLEVBQUFELEVBQUEsWUFBQSxFQUFBLElBQ0EsT0FBQUEsRUFBQSxXQUFBLENBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsT0FBQUEsRUFBQSxRQUFBLENBQUEsRUFBQSxTQUFBLEVBQUEsR0FBQSxFQUNBLE9BQUEsS0FBQSxVQUNBQyxHQUFBLElBQUEsT0FBQUQsRUFBQSxVQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsRUFBQSxJQUNBLE9BQUFBLEVBQUEsV0FBQSxDQUFBLEVBQUEsU0FBQSxFQUFBLEdBQUEsR0FFQUMsQ0FDQSxDQUNBLENBQ0EifQ==
