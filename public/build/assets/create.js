var f=Object.defineProperty,h=Object.defineProperties;var p=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var d=(a,e,t)=>e in a?f(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,r=(a,e)=>{for(var t in e||(e={}))_.call(e,t)&&d(a,t,e[t]);if(m)for(var t of m(e))w.call(e,t)&&d(a,t,e[t]);return a},n=(a,e)=>h(a,p(e));import{n as u,L as v,e as g,d as b,m as x,f as y,s as c}from"./app.js";import{g as o}from"./vform.es.js";const C={methods:{initForm(){var a;this.form=new o({title:"My Form",description:null,visibility:"public",workspace_id:(a=this.workspace)==null?void 0:a.id,properties:[],notifies:!1,slack_notifies:!1,send_submission_confirmation:!1,webhook_url:null,notification_settings:{},theme:"default",width:"centered",dark_mode:"auto",color:"#3B82F6",hide_title:!1,no_branding:!1,uppercase_labels:!0,transparent_background:!1,closes_at:null,closed_text:"This form has now been closed by its owner and does not accept submissions anymore.",auto_save:!0,submit_button_text:"Submit",re_fillable:!1,re_fill_button_text:"Fill Again",submitted_text:"Amazing, we saved your answers. Thank you for your time and have a great day!",notification_sender:"",notification_subject:"We saved your answers",notification_body:"Hello there ðŸ‘‹ <br>This is a confirmation that your submission was successfully saved.",notifications_include_submission:!0,use_captcha:!1,is_rating:!1,rating_max_value:5,max_submissions_count:null,max_submissions_reached_text:"This form has now reached the maximum number of allowed submissions and is now closed.",editable_submissions_button_text:"Edit submission",confetti_on_submission:!1,can_be_indexed:!0,seo_meta:{}})}}},k={name:"CreateFormBaseModal",components:{Loader:v},props:{show:{type:Boolean,required:!0}},data:()=>({state:"default",aiForm:new o({form_prompt:""}),loading:!1}),computed:{aiFeaturesEnabled(){return window.config.ai_features_enabled}},methods:{generateForm(){this.loading||(this.loading=!0,this.aiForm.post("/api/forms/ai/generate").then(a=>{this.alertSuccess(a.data.message),this.fetchGeneratedForm(a.data.ai_form_completion_id)}).catch(a=>{this.alertError(a.response.data.message),this.loading=!1,this.state="default"}))},fetchGeneratedForm(a){setTimeout(()=>{g.get("/api/forms/ai/"+a).then(e=>{e.data.ai_form_completion.status==="completed"?(this.alertSuccess(e.data.message),this.$emit("form-generated",JSON.parse(e.data.ai_form_completion.result)),this.$emit("close")):e.data.ai_form_completion.status==="failed"?(this.alertError("Something went wrong, please try again."),this.state="default",this.loading=!1):this.fetchGeneratedForm(a)}).catch(e=>{this.alertError(e.response.data.message),this.state="default",this.loading=!1})},4e3)}}};var F=function(){var e=this,t=e._self._c;return t("modal",{attrs:{show:e.show,closeable:!e.aiForm.busy},on:{close:function(s){return e.$emit("close")}},scopedSlots:e._u([{key:"icon",fn:function(){return[e.state=="default"?[t("svg",{staticClass:"w-10 h-10 text-blue",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z","clip-rule":"evenodd"}})])]:e.state=="ai"?[t("svg",{staticClass:"w-8 h-8 text-blue-500",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M14.615 1.595a.75.75 0 01.359.852L12.982 9.75h7.268a.75.75 0 01.548 1.262l-10.5 11.25a.75.75 0 01-1.272-.71l1.992-7.302H3.75a.75.75 0 01-.548-1.262l10.5-11.25a.75.75 0 01.913-.143z","clip-rule":"evenodd"}})])]:e._e()]},proxy:!0},{key:"title",fn:function(){return[e.state=="default"?[e._v(" Choose a base for your form ")]:e.state=="ai"?[e._v(" AI-powered form generator ")]:e._e()]},proxy:!0}])},[e.state=="default"?t("div",{staticClass:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-8"},[t("div",{directives:[{name:"track",rawName:"v-track.select_form_base",value:{base:"contact-form"},expression:"{base:'contact-form'}",modifiers:{select_form_base:!0}}],staticClass:"rounded-md border p-4 flex flex-col items-center cursor-pointer hover:bg-gray-50",on:{click:function(s){return e.$emit("close")}}},[t("div",{staticClass:"p-4"},[t("svg",{staticClass:"w-8 h-8 text-blue-500",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},[t("path",{attrs:{d:"M1.5 8.67v8.58a3 3 0 003 3h15a3 3 0 003-3V8.67l-8.928 5.493a3 3 0 01-3.144 0L1.5 8.67z"}}),t("path",{attrs:{d:"M22.5 6.908V6.75a3 3 0 00-3-3h-15a3 3 0 00-3 3v.158l9.714 5.978a1.5 1.5 0 001.572 0L22.5 6.908z"}})])]),t("p",{staticClass:"font-medium"},[e._v("Start from a simple contact form")])]),e.aiFeaturesEnabled?t("div",{directives:[{name:"track",rawName:"v-track.select_form_base",value:{base:"ai"},expression:"{base:'ai'}",modifiers:{select_form_base:!0}}],staticClass:"rounded-md border p-4 flex flex-col items-center cursor-pointer hover:bg-gray-50",on:{click:function(s){e.state="ai"}}},[t("div",{staticClass:"p-4 relative"},[t("svg",{staticClass:"w-8 h-8 text-blue-500",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M14.615 1.595a.75.75 0 01.359.852L12.982 9.75h7.268a.75.75 0 01.548 1.262l-10.5 11.25a.75.75 0 01-1.272-.71l1.992-7.302H3.75a.75.75 0 01-.548-1.262l10.5-11.25a.75.75 0 01.913-.143z","clip-rule":"evenodd"}})])]),t("p",{staticClass:"font-medium text-blue-700"},[e._v("Use our AI to create the form")]),t("span",{staticClass:"text-xs text-gray-500"},[e._v("(1 min)")])]):e._e(),t("div",{staticClass:"rounded-md border p-4 flex flex-col items-center cursor-pointer hover:bg-gray-50 relative"},[t("div",{staticClass:"p-4 relative"},[t("svg",{staticClass:"w-8 h-8 text-blue-500",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},[t("path",{attrs:{d:"M11.25 5.337c0-.355-.186-.676-.401-.959a1.647 1.647 0 01-.349-1.003c0-1.036 1.007-1.875 2.25-1.875S15 2.34 15 3.375c0 .369-.128.713-.349 1.003-.215.283-.401.604-.401.959 0 .332.278.598.61.578 1.91-.114 3.79-.342 5.632-.676a.75.75 0 01.878.645 49.17 49.17 0 01.376 5.452.657.657 0 01-.66.664c-.354 0-.675-.186-.958-.401a1.647 1.647 0 00-1.003-.349c-1.035 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401.31 0 .557.262.534.571a48.774 48.774 0 01-.595 4.845.75.75 0 01-.61.61c-1.82.317-3.673.533-5.555.642a.58.58 0 01-.611-.581c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.035-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959a.641.641 0 01-.658.643 49.118 49.118 0 01-4.708-.36.75.75 0 01-.645-.878c.293-1.614.504-3.257.629-4.924A.53.53 0 005.337 15c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.036 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.369 0 .713.128 1.003.349.283.215.604.401.959.401a.656.656 0 00.659-.663 47.703 47.703 0 00-.31-4.82.75.75 0 01.83-.832c1.343.155 2.703.254 4.077.294a.64.64 0 00.657-.642z"}})])]),t("p",{staticClass:"font-medium"},[e._v("Start from a template")]),t("router-link",{directives:[{name:"track",rawName:"v-track.select_form_base",value:{base:"template"},expression:"{base:'template'}",modifiers:{select_form_base:!0}}],staticClass:"absolute inset-0",attrs:{to:{name:"templates"}}})],1)]):e.state=="ai"?t("div",[t("a",{staticClass:"absolute top-4 left-4",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),e.state="default"}}},[t("svg",{staticClass:"w-4 h-4 inline -mt-1",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"}},[t("path",{attrs:{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"}})]),e._v(" Back ")]),t("text-area-input",{attrs:{label:"Form Description",disabled:e.loading,form:e.aiForm,name:"form_prompt",help:"Give us a description of the form you want to build (the more details the better)",placeholder:"A simple contact form, with a name, email and message field"}}),t("v-button",{staticClass:"w-full",attrs:{loading:e.loading},on:{click:function(s){return s.preventDefault(),e.generateForm.apply(null,arguments)}}},[e._v(" Generate a form ")]),t("p",{staticClass:"text-gray-500 text-xs text-center mt-1"},[e._v("~60 sec")])],1):e._e()])},M=[],$=u(k,F,M,!1,null,null,null,null);const S=$.exports,B=function(){c.commit("open/templates/startLoading"),c.dispatch("open/templates/loadIfEmpty").then(()=>{c.commit("open/templates/stopLoading")})},I={name:"CreateForm",mixins:[C,b],components:{CreateFormBaseModal:S},beforeRouteEnter(a,e,t){B(),t()},beforeRouteLeave(a,e,t){if(this.isDirty())return this.alertConfirm("Changes you made may not be saved. Are you sure want to leave?",()=>{window.onbeforeunload=null,t()},()=>{});t()},middleware:"auth",data(){return{metaTitle:"Create a new Form",stateReady:!1,loading:!1,error:"",showInitialFormModal:!1,formInitialHash:null}},computed:n(r({},x({workspaces:a=>a["open/workspaces"].content,workspacesLoading:a=>a["open/workspaces"].loading,user:a=>a.auth.user})),{form:{get(){return this.$store.state["open/working_form"].content},set(a){this.$store.commit("open/working_form/set",a)}},workspace(){return this.$store.getters["open/workspaces/getCurrent"]()}}),watch:{workspace(){this.workspace&&(this.form.workspace_id=this.workspace.id)},user(){this.stateReady=!0}},mounted(){if(window.onbeforeunload=()=>{if(this.isDirty())return!1},this.initForm(),this.formInitialHash=this.hashString(JSON.stringify(this.form.data())),this.$route.query.template!==void 0&&this.$route.query.template){const a=this.$store.getters["open/templates/getBySlug"](this.$route.query.template);a&&a.structure&&(this.form=new o(r(r({},this.form.data()),a.structure)))}else this.showInitialFormModal=!0;this.closeAlert(),this.loadWorkspaces(),this.stateReady=this.user!==null},created(){},destroyed(){},methods:n(r({},y({loadWorkspaces:"open/workspaces/loadIfEmpty"})),{formGenerated(a){this.form=new o(r(r({},this.form.data()),a))},isDirty(){return!this.loading&&this.formInitialHash&&this.formInitialHash!==this.hashString(JSON.stringify(this.form.data()))},hashString(a,e=0){let t=3735928559^e,s=1103547991^e;for(let i=0,l;i<a.length;i++)l=a.charCodeAt(i),t=Math.imul(t^l,2654435761),s=Math.imul(s^l,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(s^s>>>13,3266489909),s=Math.imul(s^s>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&s)+(t>>>0)}})};var L=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-wrap flex-col"},[e.stateReady?t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("div",{key:"2"},[t("create-form-base-modal",{attrs:{show:e.showInitialFormModal},on:{"form-generated":e.formGenerated,close:function(s){e.showInitialFormModal=!1}}}),e.workspacesLoading?t("div",{staticClass:"text-center mt-4 py-6"},[t("loader",{staticClass:"h-6 w-6 text-nt-blue mx-auto"})],1):t("form-editor",{ref:"editor",staticClass:"w-full flex flex-grow",attrs:{error:e.error},on:{"on-save":function(s){e.formInitialHash=null}}})],1)]):e._e()],1)},A=[],z=u(I,L,A,!1,null,null,null,null);const G=z.exports;export{G as default};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9yZXNvdXJjZXMvanMvbWl4aW5zL2Zvcm1fZWRpdG9yL2luaXRGb3JtLmpzIiwiLi4vLi4vLi4vcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvcGFnZXMvZm9ybXMvY3JlYXRlL0NyZWF0ZUZvcm1CYXNlTW9kYWwudnVlIiwiLi4vLi4vLi4vcmVzb3VyY2VzL2pzL3BhZ2VzL2Zvcm1zL2NyZWF0ZS52dWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEZvcm0gZnJvbSBcInZmb3JtXCI7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbWV0aG9kczoge1xuICAgIGluaXRGb3JtKCkge1xuICAgICAgdGhpcy5mb3JtID0gbmV3IEZvcm0oe1xuICAgICAgICB0aXRsZTogJ015IEZvcm0nLFxuICAgICAgICBkZXNjcmlwdGlvbjogbnVsbCxcbiAgICAgICAgdmlzaWJpbGl0eTogJ3B1YmxpYycsXG4gICAgICAgIHdvcmtzcGFjZV9pZDogdGhpcy53b3Jrc3BhY2U/LmlkLFxuICAgICAgICBwcm9wZXJ0aWVzOiBbXSxcblxuICAgICAgICBub3RpZmllczogZmFsc2UsXG4gICAgICAgIHNsYWNrX25vdGlmaWVzOiBmYWxzZSxcbiAgICAgICAgc2VuZF9zdWJtaXNzaW9uX2NvbmZpcm1hdGlvbjogZmFsc2UsXG4gICAgICAgIHdlYmhvb2tfdXJsOiBudWxsLFxuICAgICAgICBub3RpZmljYXRpb25fc2V0dGluZ3M6IHt9LFxuXG4gICAgICAgIC8vIEN1c3RvbWl6YXRpb25cbiAgICAgICAgdGhlbWU6ICdkZWZhdWx0JyxcbiAgICAgICAgd2lkdGg6ICdjZW50ZXJlZCcsXG4gICAgICAgIGRhcmtfbW9kZTogJ2F1dG8nLFxuICAgICAgICBjb2xvcjogJyMzQjgyRjYnLFxuICAgICAgICBoaWRlX3RpdGxlOiBmYWxzZSxcbiAgICAgICAgbm9fYnJhbmRpbmc6IGZhbHNlLFxuICAgICAgICB1cHBlcmNhc2VfbGFiZWxzOiB0cnVlLFxuICAgICAgICB0cmFuc3BhcmVudF9iYWNrZ3JvdW5kOiBmYWxzZSxcbiAgICAgICAgY2xvc2VzX2F0OiBudWxsLFxuICAgICAgICBjbG9zZWRfdGV4dDogJ1RoaXMgZm9ybSBoYXMgbm93IGJlZW4gY2xvc2VkIGJ5IGl0cyBvd25lciBhbmQgZG9lcyBub3QgYWNjZXB0IHN1Ym1pc3Npb25zIGFueW1vcmUuJyxcbiAgICAgICAgYXV0b19zYXZlOiB0cnVlLFxuXG4gICAgICAgIC8vIFN1Ym1pc3Npb25cbiAgICAgICAgc3VibWl0X2J1dHRvbl90ZXh0OiAnU3VibWl0JyxcbiAgICAgICAgcmVfZmlsbGFibGU6IGZhbHNlLFxuICAgICAgICByZV9maWxsX2J1dHRvbl90ZXh0OiAnRmlsbCBBZ2FpbicsXG4gICAgICAgIHN1Ym1pdHRlZF90ZXh0OiAnQW1hemluZywgd2Ugc2F2ZWQgeW91ciBhbnN3ZXJzLiBUaGFuayB5b3UgZm9yIHlvdXIgdGltZSBhbmQgaGF2ZSBhIGdyZWF0IGRheSEnLFxuICAgICAgICBub3RpZmljYXRpb25fc2VuZGVyOiAnJyxcbiAgICAgICAgbm90aWZpY2F0aW9uX3N1YmplY3Q6ICdXZSBzYXZlZCB5b3VyIGFuc3dlcnMnLFxuICAgICAgICBub3RpZmljYXRpb25fYm9keTogJ0hlbGxvIHRoZXJlIPCfkYsgPGJyPlRoaXMgaXMgYSBjb25maXJtYXRpb24gdGhhdCB5b3VyIHN1Ym1pc3Npb24gd2FzIHN1Y2Nlc3NmdWxseSBzYXZlZC4nLFxuICAgICAgICBub3RpZmljYXRpb25zX2luY2x1ZGVfc3VibWlzc2lvbjogdHJ1ZSxcbiAgICAgICAgdXNlX2NhcHRjaGE6IGZhbHNlLFxuICAgICAgICBpc19yYXRpbmc6IGZhbHNlLFxuICAgICAgICByYXRpbmdfbWF4X3ZhbHVlOiA1LFxuICAgICAgICBtYXhfc3VibWlzc2lvbnNfY291bnQ6IG51bGwsXG4gICAgICAgIG1heF9zdWJtaXNzaW9uc19yZWFjaGVkX3RleHQ6ICdUaGlzIGZvcm0gaGFzIG5vdyByZWFjaGVkIHRoZSBtYXhpbXVtIG51bWJlciBvZiBhbGxvd2VkIHN1Ym1pc3Npb25zIGFuZCBpcyBub3cgY2xvc2VkLicsXG4gICAgICAgIGVkaXRhYmxlX3N1Ym1pc3Npb25zX2J1dHRvbl90ZXh0OiAnRWRpdCBzdWJtaXNzaW9uJyxcbiAgICAgICAgY29uZmV0dGlfb25fc3VibWlzc2lvbjogZmFsc2UsXG5cbiAgICAgICAgLy8gU2VjdXJpdHkgJiBQcml2YWN5XG4gICAgICAgIGNhbl9iZV9pbmRleGVkOiB0cnVlLFxuXG4gICAgICAgIC8vIEN1c3RvbSBTRU9cbiAgICAgICAgc2VvX21ldGE6IHt9XG4gICAgICB9KVxuICAgIH0sXG4gIH1cbn1cbiIsIjx0ZW1wbGF0ZT5cbiAgPG1vZGFsIDpzaG93PVwic2hvd1wiIEBjbG9zZT1cIiRlbWl0KCdjbG9zZScpXCIgOmNsb3NlYWJsZT1cIiFhaUZvcm0uYnVzeVwiPlxuICAgIDx0ZW1wbGF0ZSAjaWNvbj5cbiAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwic3RhdGU9PSdkZWZhdWx0J1wiPlxuICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGNsYXNzPVwidy0xMCBoLTEwIHRleHQtYmx1ZVwiPlxuICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgICAgIGQ9XCJNMTIgMy43NWEuNzUuNzUgMCAwMS43NS43NXY2Ljc1aDYuNzVhLjc1Ljc1IDAgMDEwIDEuNWgtNi43NXY2Ljc1YS43NS43NSAwIDAxLTEuNSAwdi02Ljc1SDQuNWEuNzUuNzUgMCAwMTAtMS41aDYuNzVWNC41YS43NS43NSAwIDAxLjc1LS43NXpcIlxuICAgICAgICAgICAgICAgIGNsaXAtcnVsZT1cImV2ZW5vZGRcIi8+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgIDx0ZW1wbGF0ZSB2LWVsc2UtaWY9XCJzdGF0ZT09J2FpJ1wiPlxuICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGNsYXNzPVwidy04IGgtOCB0ZXh0LWJsdWUtNTAwXCI+XG4gICAgICAgICAgPHBhdGggZmlsbC1ydWxlPVwiZXZlbm9kZFwiXG4gICAgICAgICAgICAgICAgZD1cIk0xNC42MTUgMS41OTVhLjc1Ljc1IDAgMDEuMzU5Ljg1MkwxMi45ODIgOS43NWg3LjI2OGEuNzUuNzUgMCAwMS41NDggMS4yNjJsLTEwLjUgMTEuMjVhLjc1Ljc1IDAgMDEtMS4yNzItLjcxbDEuOTkyLTcuMzAySDMuNzVhLjc1Ljc1IDAgMDEtLjU0OC0xLjI2MmwxMC41LTExLjI1YS43NS43NSAwIDAxLjkxMy0uMTQzelwiXG4gICAgICAgICAgICAgICAgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz5cbiAgICAgICAgPC9zdmc+XG4gICAgICA8L3RlbXBsYXRlPlxuICAgIDwvdGVtcGxhdGU+XG4gICAgPHRlbXBsYXRlICN0aXRsZT5cbiAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwic3RhdGU9PSdkZWZhdWx0J1wiPlxuICAgICAgICBDaG9vc2UgYSBiYXNlIGZvciB5b3VyIGZvcm1cbiAgICAgIDwvdGVtcGxhdGU+XG4gICAgICA8dGVtcGxhdGUgdi1lbHNlLWlmPVwic3RhdGU9PSdhaSdcIj5cbiAgICAgICAgQUktcG93ZXJlZCBmb3JtIGdlbmVyYXRvclxuICAgICAgPC90ZW1wbGF0ZT5cbiAgICA8L3RlbXBsYXRlPlxuICAgIDxkaXYgY2xhc3M9XCJncmlkIGdyaWQtY29scy0xIHNtOmdyaWQtY29scy0yIGdhcC00IG10LThcIiB2LWlmPVwic3RhdGU9PSdkZWZhdWx0J1wiPlxuICAgICAgPGRpdiBjbGFzcz1cInJvdW5kZWQtbWQgYm9yZGVyIHAtNCBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ncmF5LTUwXCJcbiAgICAgICAgICAgQGNsaWNrPVwiJGVtaXQoJ2Nsb3NlJylcIiB2LXRyYWNrLnNlbGVjdF9mb3JtX2Jhc2U9XCJ7YmFzZTonY29udGFjdC1mb3JtJ31cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInAtNFwiPlxuICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgY2xhc3M9XCJ3LTggaC04IHRleHQtYmx1ZS01MDBcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMS41IDguNjd2OC41OGEzIDMgMCAwMDMgM2gxNWEzIDMgMCAwMDMtM1Y4LjY3bC04LjkyOCA1LjQ5M2EzIDMgMCAwMS0zLjE0NCAwTDEuNSA4LjY3elwiLz5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMjIuNSA2LjkwOFY2Ljc1YTMgMyAwIDAwLTMtM2gtMTVhMyAzIDAgMDAtMyAzdi4xNThsOS43MTQgNS45NzhhMS41IDEuNSAwIDAwMS41NzIgMEwyMi41IDYuOTA4elwiLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxwIGNsYXNzPVwiZm9udC1tZWRpdW1cIj5TdGFydCBmcm9tIGEgc2ltcGxlIGNvbnRhY3QgZm9ybTwvcD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiB2LWlmPVwiYWlGZWF0dXJlc0VuYWJsZWRcIiB2LXRyYWNrLnNlbGVjdF9mb3JtX2Jhc2U9XCJ7YmFzZTonYWknfVwiXG4gICAgICAgICAgIGNsYXNzPVwicm91bmRlZC1tZCBib3JkZXIgcC00IGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGN1cnNvci1wb2ludGVyIGhvdmVyOmJnLWdyYXktNTBcIiBAY2xpY2s9XCJzdGF0ZT0nYWknXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwLTQgcmVsYXRpdmVcIj5cbiAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIGNsYXNzPVwidy04IGgtOCB0ZXh0LWJsdWUtNTAwXCI+XG4gICAgICAgICAgICA8cGF0aCBmaWxsLXJ1bGU9XCJldmVub2RkXCJcbiAgICAgICAgICAgICAgICAgIGQ9XCJNMTQuNjE1IDEuNTk1YS43NS43NSAwIDAxLjM1OS44NTJMMTIuOTgyIDkuNzVoNy4yNjhhLjc1Ljc1IDAgMDEuNTQ4IDEuMjYybC0xMC41IDExLjI1YS43NS43NSAwIDAxLTEuMjcyLS43MWwxLjk5Mi03LjMwMkgzLjc1YS43NS43NSAwIDAxLS41NDgtMS4yNjJsMTAuNS0xMS4yNWEuNzUuNzUgMCAwMS45MTMtLjE0M3pcIlxuICAgICAgICAgICAgICAgICAgY2xpcC1ydWxlPVwiZXZlbm9kZFwiLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxwIGNsYXNzPVwiZm9udC1tZWRpdW0gdGV4dC1ibHVlLTcwMFwiPlVzZSBvdXIgQUkgdG8gY3JlYXRlIHRoZSBmb3JtPC9wPlxuICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQteHMgdGV4dC1ncmF5LTUwMFwiPigxIG1pbik8L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJyb3VuZGVkLW1kIGJvcmRlciBwLTQgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgY3Vyc29yLXBvaW50ZXIgaG92ZXI6YmctZ3JheS01MCByZWxhdGl2ZVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwicC00IHJlbGF0aXZlXCI+XG4gICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBjbGFzcz1cInctOCBoLTggdGV4dC1ibHVlLTUwMFwiPlxuICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgZD1cIk0xMS4yNSA1LjMzN2MwLS4zNTUtLjE4Ni0uNjc2LS40MDEtLjk1OWExLjY0NyAxLjY0NyAwIDAxLS4zNDktMS4wMDNjMC0xLjAzNiAxLjAwNy0xLjg3NSAyLjI1LTEuODc1UzE1IDIuMzQgMTUgMy4zNzVjMCAuMzY5LS4xMjguNzEzLS4zNDkgMS4wMDMtLjIxNS4yODMtLjQwMS42MDQtLjQwMS45NTkgMCAuMzMyLjI3OC41OTguNjEuNTc4IDEuOTEtLjExNCAzLjc5LS4zNDIgNS42MzItLjY3NmEuNzUuNzUgMCAwMS44NzguNjQ1IDQ5LjE3IDQ5LjE3IDAgMDEuMzc2IDUuNDUyLjY1Ny42NTcgMCAwMS0uNjYuNjY0Yy0uMzU0IDAtLjY3NS0uMTg2LS45NTgtLjQwMWExLjY0NyAxLjY0NyAwIDAwLTEuMDAzLS4zNDljLTEuMDM1IDAtMS44NzUgMS4wMDctMS44NzUgMi4yNXMuODQgMi4yNSAxLjg3NSAyLjI1Yy4zNjkgMCAuNzEzLS4xMjggMS4wMDMtLjM0OS4yODMtLjIxNS42MDQtLjQwMS45NTktLjQwMS4zMSAwIC41NTcuMjYyLjUzNC41NzFhNDguNzc0IDQ4Ljc3NCAwIDAxLS41OTUgNC44NDUuNzUuNzUgMCAwMS0uNjEuNjFjLTEuODIuMzE3LTMuNjczLjUzMy01LjU1NS42NDJhLjU4LjU4IDAgMDEtLjYxMS0uNTgxYzAtLjM1NS4xODYtLjY3Ni40MDEtLjk1OS4yMjEtLjI5LjM0OS0uNjM0LjM0OS0xLjAwMyAwLTEuMDM1LTEuMDA3LTEuODc1LTIuMjUtMS44NzVzLTIuMjUuODQtMi4yNSAxLjg3NWMwIC4zNjkuMTI4LjcxMy4zNDkgMS4wMDMuMjE1LjI4My40MDEuNjA0LjQwMS45NTlhLjY0MS42NDEgMCAwMS0uNjU4LjY0MyA0OS4xMTggNDkuMTE4IDAgMDEtNC43MDgtLjM2Ljc1Ljc1IDAgMDEtLjY0NS0uODc4Yy4yOTMtMS42MTQuNTA0LTMuMjU3LjYyOS00LjkyNEEuNTMuNTMgMCAwMDUuMzM3IDE1Yy0uMzU1IDAtLjY3Ni4xODYtLjk1OS40MDEtLjI5LjIyMS0uNjM0LjM0OS0xLjAwMy4zNDktMS4wMzYgMC0xLjg3NS0xLjAwNy0xLjg3NS0yLjI1cy44NC0yLjI1IDEuODc1LTIuMjVjLjM2OSAwIC43MTMuMTI4IDEuMDAzLjM0OS4yODMuMjE1LjYwNC40MDEuOTU5LjQwMWEuNjU2LjY1NiAwIDAwLjY1OS0uNjYzIDQ3LjcwMyA0Ny43MDMgMCAwMC0uMzEtNC44Mi43NS43NSAwIDAxLjgzLS44MzJjMS4zNDMuMTU1IDIuNzAzLjI1NCA0LjA3Ny4yOTRhLjY0LjY0IDAgMDAuNjU3LS42NDJ6XCIvPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPHAgY2xhc3M9XCJmb250LW1lZGl1bVwiPlN0YXJ0IGZyb20gYSB0ZW1wbGF0ZTwvcD5cbiAgICAgICAgPHJvdXRlci1saW5rIDp0bz1cIntuYW1lOid0ZW1wbGF0ZXMnfVwiIHYtdHJhY2suc2VsZWN0X2Zvcm1fYmFzZT1cIntiYXNlOid0ZW1wbGF0ZSd9XCIgY2xhc3M9XCJhYnNvbHV0ZSBpbnNldC0wXCIvPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiB2LWVsc2UtaWY9XCJzdGF0ZT09J2FpJ1wiPlxuICAgICAgPGEgY2xhc3M9XCJhYnNvbHV0ZSB0b3AtNCBsZWZ0LTRcIiBocmVmPVwiI1wiIEBjbGljay5wcmV2ZW50PVwic3RhdGU9J2RlZmF1bHQnXCI+XG4gICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgY2xhc3M9XCJ3LTQgaC00IGlubGluZSAtbXQtMVwiPlxuICAgICAgICAgIDxwYXRoIGZpbGwtcnVsZT1cImV2ZW5vZGRcIiBkPVwiTTcuNzIgMTIuNTNhLjc1Ljc1IDAgMDEwLTEuMDZsNy41LTcuNWEuNzUuNzUgMCAxMTEuMDYgMS4wNkw5LjMxIDEybDYuOTcgNi45N2EuNzUuNzUgMCAxMS0xLjA2IDEuMDZsLTcuNS03LjV6XCIgY2xpcC1ydWxlPVwiZXZlbm9kZFwiIC8+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgICBCYWNrXG4gICAgICA8L2E+XG4gICAgICA8dGV4dC1hcmVhLWlucHV0IGxhYmVsPVwiRm9ybSBEZXNjcmlwdGlvblwiIDpkaXNhYmxlZD1cImxvYWRpbmdcIiA6Zm9ybT1cImFpRm9ybVwiIG5hbWU9XCJmb3JtX3Byb21wdFwiIGhlbHA9XCJHaXZlIHVzIGEgZGVzY3JpcHRpb24gb2YgdGhlIGZvcm0geW91IHdhbnQgdG8gYnVpbGQgKHRoZSBtb3JlIGRldGFpbHMgdGhlIGJldHRlcilcIlxuICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkEgc2ltcGxlIGNvbnRhY3QgZm9ybSwgd2l0aCBhIG5hbWUsIGVtYWlsIGFuZCBtZXNzYWdlIGZpZWxkXCIgLz5cbiAgICAgIDx2LWJ1dHRvbiBjbGFzcz1cInctZnVsbFwiIEBjbGljay5wcmV2ZW50PVwiZ2VuZXJhdGVGb3JtXCIgOmxvYWRpbmc9XCJsb2FkaW5nXCI+XG4gICAgICAgIEdlbmVyYXRlIGEgZm9ybVxuICAgICAgPC92LWJ1dHRvbj5cbiAgICAgIDxwIGNsYXNzPVwidGV4dC1ncmF5LTUwMCB0ZXh0LXhzIHRleHQtY2VudGVyIG10LTFcIj5+NjAgc2VjPC9wPlxuICAgIDwvZGl2PlxuICA8L21vZGFsPlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBMb2FkZXIgZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9Mb2FkZXIudnVlXCI7XG5pbXBvcnQgRm9ybSBmcm9tIFwidmZvcm1cIjtcbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnQ3JlYXRlRm9ybUJhc2VNb2RhbCcsXG4gIGNvbXBvbmVudHM6IHtMb2FkZXJ9LFxuICBwcm9wczoge1xuICAgIHNob3c6IHt0eXBlOiBCb29sZWFuLCByZXF1aXJlZDogdHJ1ZX0sXG4gIH0sXG5cbiAgZGF0YTogKCkgPT4gKHtcbiAgICBzdGF0ZTogJ2RlZmF1bHQnLFxuICAgIGFpRm9ybTogbmV3IEZvcm0oe1xuICAgICAgZm9ybV9wcm9tcHQ6ICcnXG4gICAgfSksXG4gICAgbG9hZGluZzogZmFsc2UsXG4gIH0pLFxuXG4gIGNvbXB1dGVkOiB7XG4gICAgYWlGZWF0dXJlc0VuYWJsZWQoKSB7XG4gICAgICByZXR1cm4gd2luZG93LmNvbmZpZy5haV9mZWF0dXJlc19lbmFibGVkXG4gICAgfVxuICB9LFxuXG4gIG1ldGhvZHM6IHtcbiAgICBnZW5lcmF0ZUZvcm0oKSB7XG4gICAgICBpZiAodGhpcy5sb2FkaW5nKSByZXR1cm5cblxuICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZVxuICAgICAgdGhpcy5haUZvcm0ucG9zdCgnL2FwaS9mb3Jtcy9haS9nZW5lcmF0ZScpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICB0aGlzLmFsZXJ0U3VjY2VzcyhyZXNwb25zZS5kYXRhLm1lc3NhZ2UpXG4gICAgICAgIHRoaXMuZmV0Y2hHZW5lcmF0ZWRGb3JtKHJlc3BvbnNlLmRhdGEuYWlfZm9ybV9jb21wbGV0aW9uX2lkKVxuICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICB0aGlzLmFsZXJ0RXJyb3IoZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlKVxuICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICB0aGlzLnN0YXRlID0gJ2RlZmF1bHQnXG4gICAgICB9KVxuICAgIH0sXG4gICAgZmV0Y2hHZW5lcmF0ZWRGb3JtKGdlbmVyYXRpb25JZCkge1xuICAgICAgLy8gY2hlY2sgZXZlcnkgNCBzZWNvbmRzIGlmIGZvcm0gaXMgZ2VuZXJhdGVkXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgYXhpb3MuZ2V0KCcvYXBpL2Zvcm1zL2FpLycgKyBnZW5lcmF0aW9uSWQpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmFpX2Zvcm1fY29tcGxldGlvbi5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmFsZXJ0U3VjY2VzcyhyZXNwb25zZS5kYXRhLm1lc3NhZ2UpXG4gICAgICAgICAgICB0aGlzLiRlbWl0KCdmb3JtLWdlbmVyYXRlZCcsIEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YS5haV9mb3JtX2NvbXBsZXRpb24ucmVzdWx0KSlcbiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJylcbiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuYWlfZm9ybV9jb21wbGV0aW9uLnN0YXR1cyA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuYWxlcnRFcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcsIHBsZWFzZSB0cnkgYWdhaW4uJylcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAnZGVmYXVsdCdcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hHZW5lcmF0ZWRGb3JtKGdlbmVyYXRpb25JZClcbiAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICB0aGlzLmFsZXJ0RXJyb3IoZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlKVxuICAgICAgICAgIHRoaXMuc3RhdGUgPSAnZGVmYXVsdCdcbiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZVxuICAgICAgICB9KVxuICAgICAgfSwgNDAwMClcbiAgICB9XG4gIH1cbn1cbjwvc2NyaXB0PlxuIiwiPHRlbXBsYXRlPlxuICA8ZGl2IGNsYXNzPVwiZmxleCBmbGV4LXdyYXAgZmxleC1jb2xcIj5cbiAgICA8dHJhbnNpdGlvbiB2LWlmPVwic3RhdGVSZWFkeVwiIG5hbWU9XCJmYWRlXCIgbW9kZT1cIm91dC1pblwiPlxuICAgICAgPGRpdiBrZXk9XCIyXCI+XG4gICAgICAgIDxjcmVhdGUtZm9ybS1iYXNlLW1vZGFsIEBmb3JtLWdlbmVyYXRlZD1cImZvcm1HZW5lcmF0ZWRcIiA6c2hvdz1cInNob3dJbml0aWFsRm9ybU1vZGFsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQGNsb3NlPVwic2hvd0luaXRpYWxGb3JtTW9kYWw9ZmFsc2VcIi8+XG4gICAgICAgIDxmb3JtLWVkaXRvciB2LWlmPVwiIXdvcmtzcGFjZXNMb2FkaW5nXCIgcmVmPVwiZWRpdG9yXCJcbiAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwidy1mdWxsIGZsZXggZmxleC1ncm93XCJcbiAgICAgICAgICAgICAgICAgICAgIDplcnJvcj1cImVycm9yXCJcbiAgICAgICAgICAgICAgICAgICAgIEBvbi1zYXZlPVwiZm9ybUluaXRpYWxIYXNoPW51bGxcIlxuICAgICAgICAvPlxuICAgICAgICA8ZGl2IHYtZWxzZSBjbGFzcz1cInRleHQtY2VudGVyIG10LTQgcHktNlwiPlxuICAgICAgICAgIDxsb2FkZXIgY2xhc3M9XCJoLTYgdy02IHRleHQtbnQtYmx1ZSBteC1hdXRvXCIvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvdHJhbnNpdGlvbj5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IHN0b3JlIGZyb20gJ34vc3RvcmUnXG5pbXBvcnQgRm9ybSBmcm9tICd2Zm9ybSdcbmltcG9ydCB7bWFwU3RhdGUsIG1hcEFjdGlvbnN9IGZyb20gJ3Z1ZXgnXG5pbXBvcnQgaW5pdEZvcm0gZnJvbSBcIi4uLy4uL21peGlucy9mb3JtX2VkaXRvci9pbml0Rm9ybS5qc1wiO1xuaW1wb3J0IFNlb01ldGEgZnJvbSAnLi4vLi4vbWl4aW5zL3Nlby1tZXRhLmpzJ1xuaW1wb3J0IENyZWF0ZUZvcm1CYXNlTW9kYWwgZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvcGFnZXMvZm9ybXMvY3JlYXRlL0NyZWF0ZUZvcm1CYXNlTW9kYWwudnVlXCJcblxuY29uc3QgbG9hZFRlbXBsYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgc3RvcmUuY29tbWl0KCdvcGVuL3RlbXBsYXRlcy9zdGFydExvYWRpbmcnKVxuICBzdG9yZS5kaXNwYXRjaCgnb3Blbi90ZW1wbGF0ZXMvbG9hZElmRW1wdHknKS50aGVuKCgpID0+IHtcbiAgICBzdG9yZS5jb21taXQoJ29wZW4vdGVtcGxhdGVzL3N0b3BMb2FkaW5nJylcbiAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnQ3JlYXRlRm9ybScsXG5cbiAgbWl4aW5zOiBbaW5pdEZvcm0sIFNlb01ldGFdLFxuICBjb21wb25lbnRzOiB7Q3JlYXRlRm9ybUJhc2VNb2RhbH0sXG5cbiAgYmVmb3JlUm91dGVFbnRlcih0bywgZnJvbSwgbmV4dCkge1xuICAgIGxvYWRUZW1wbGF0ZXMoKVxuICAgIG5leHQoKVxuICB9LFxuXG4gIGJlZm9yZVJvdXRlTGVhdmUgKHRvLCBmcm9tLCBuZXh0KSB7XG4gICAgaWYgKHRoaXMuaXNEaXJ0eSgpKSB7XG4gICAgICByZXR1cm4gdGhpcy5hbGVydENvbmZpcm0oJ0NoYW5nZXMgeW91IG1hZGUgbWF5IG5vdCBiZSBzYXZlZC4gQXJlIHlvdSBzdXJlIHdhbnQgdG8gbGVhdmU/JywgKCkgPT4ge1xuICAgICAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBudWxsXG4gICAgICAgIG5leHQoKVxuICAgICAgfSwgKCkgPT4ge30pXG4gICAgfVxuICAgIG5leHQoKVxuICB9LFxuXG4gIG1pZGRsZXdhcmU6ICdhdXRoJyxcblxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBtZXRhVGl0bGU6ICdDcmVhdGUgYSBuZXcgRm9ybScsXG4gICAgICBzdGF0ZVJlYWR5OiBmYWxzZSxcbiAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgZXJyb3I6ICcnLFxuICAgICAgc2hvd0luaXRpYWxGb3JtTW9kYWw6IGZhbHNlLFxuICAgICAgZm9ybUluaXRpYWxIYXNoOiBudWxsXG4gICAgfVxuICB9LFxuXG4gIGNvbXB1dGVkOiB7XG4gICAgLi4ubWFwU3RhdGUoe1xuICAgICAgd29ya3NwYWNlczogc3RhdGUgPT4gc3RhdGVbJ29wZW4vd29ya3NwYWNlcyddLmNvbnRlbnQsXG4gICAgICB3b3Jrc3BhY2VzTG9hZGluZzogc3RhdGUgPT4gc3RhdGVbJ29wZW4vd29ya3NwYWNlcyddLmxvYWRpbmcsXG4gICAgICB1c2VyOiBzdGF0ZSA9PiBzdGF0ZS5hdXRoLnVzZXJcbiAgICB9KSxcbiAgICBmb3JtOiB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZVsnb3Blbi93b3JraW5nX2Zvcm0nXS5jb250ZW50XG4gICAgICB9LFxuICAgICAgLyogV2UgYWRkIGEgc2V0dGVyICovXG4gICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdvcGVuL3dvcmtpbmdfZm9ybS9zZXQnLCB2YWx1ZSlcbiAgICAgIH1cbiAgICB9LFxuICAgIHdvcmtzcGFjZSgpIHtcbiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydvcGVuL3dvcmtzcGFjZXMvZ2V0Q3VycmVudCddKClcbiAgICB9LFxuICB9LFxuXG4gIHdhdGNoOiB7XG4gICAgd29ya3NwYWNlKCkge1xuICAgICAgaWYgKHRoaXMud29ya3NwYWNlKSB7XG4gICAgICAgIHRoaXMuZm9ybS53b3Jrc3BhY2VfaWQgPSB0aGlzLndvcmtzcGFjZS5pZFxuICAgICAgfVxuICAgIH0sXG4gICAgdXNlcigpIHtcbiAgICAgIHRoaXMuc3RhdGVSZWFkeSA9IHRydWVcbiAgICB9XG4gIH0sXG5cbiAgbW91bnRlZCgpIHtcbiAgICB3aW5kb3cub25iZWZvcmV1bmxvYWQgPSAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5pc0RpcnR5KCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5pbml0Rm9ybSgpXG4gICAgdGhpcy5mb3JtSW5pdGlhbEhhc2ggPSB0aGlzLmhhc2hTdHJpbmcoSlNPTi5zdHJpbmdpZnkodGhpcy5mb3JtLmRhdGEoKSkpXG4gICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnRlbXBsYXRlICE9PSB1bmRlZmluZWQgJiYgdGhpcy4kcm91dGUucXVlcnkudGVtcGxhdGUpIHtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snb3Blbi90ZW1wbGF0ZXMvZ2V0QnlTbHVnJ10odGhpcy4kcm91dGUucXVlcnkudGVtcGxhdGUpXG4gICAgICBpZiAodGVtcGxhdGUgJiYgdGVtcGxhdGUuc3RydWN0dXJlKSB7XG4gICAgICAgIHRoaXMuZm9ybSA9IG5ldyBGb3JtKHsuLi50aGlzLmZvcm0uZGF0YSgpLCAuLi50ZW1wbGF0ZS5zdHJ1Y3R1cmV9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBObyB0ZW1wbGF0ZSBsb2FkZWQsIGFzayBob3cgdG8gc3RhcnRcbiAgICAgIHRoaXMuc2hvd0luaXRpYWxGb3JtTW9kYWwgPSB0cnVlXG4gICAgfVxuICAgIHRoaXMuY2xvc2VBbGVydCgpXG4gICAgdGhpcy5sb2FkV29ya3NwYWNlcygpXG5cbiAgICB0aGlzLnN0YXRlUmVhZHkgPSB0aGlzLnVzZXIgIT09IG51bGxcbiAgfSxcblxuICBjcmVhdGVkKCkge30sXG4gIGRlc3Ryb3llZCgpIHt9LFxuXG4gIG1ldGhvZHM6IHtcbiAgICAuLi5tYXBBY3Rpb25zKHtcbiAgICAgIGxvYWRXb3Jrc3BhY2VzOiAnb3Blbi93b3Jrc3BhY2VzL2xvYWRJZkVtcHR5J1xuICAgIH0pLFxuICAgIGZvcm1HZW5lcmF0ZWQoZm9ybSkge1xuICAgICAgdGhpcy5mb3JtID0gbmV3IEZvcm0oey4uLnRoaXMuZm9ybS5kYXRhKCksIC4uLmZvcm19KVxuICAgIH0sXG4gICAgaXNEaXJ0eSAoKSB7XG4gICAgICByZXR1cm4gIXRoaXMubG9hZGluZyAmJiB0aGlzLmZvcm1Jbml0aWFsSGFzaCAmJiB0aGlzLmZvcm1Jbml0aWFsSGFzaCAhPT0gdGhpcy5oYXNoU3RyaW5nKEpTT04uc3RyaW5naWZ5KHRoaXMuZm9ybS5kYXRhKCkpKVxuICAgIH0sXG4gICAgaGFzaFN0cmluZyAoc3RyLCBzZWVkID0gMCkge1xuICAgICAgbGV0IGgxID0gMHhkZWFkYmVlZiBeIHNlZWRcbiAgICAgIGxldCBoMiA9IDB4NDFjNmNlNTcgXiBzZWVkXG4gICAgICBmb3IgKGxldCBpID0gMCwgY2g7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2ggPSBzdHIuY2hhckNvZGVBdChpKVxuICAgICAgICBoMSA9IE1hdGguaW11bChoMSBeIGNoLCAyNjU0NDM1NzYxKVxuICAgICAgICBoMiA9IE1hdGguaW11bChoMiBeIGNoLCAxNTk3MzM0Njc3KVxuICAgICAgfVxuXG4gICAgICBoMSA9IE1hdGguaW11bChoMSBeIChoMSA+Pj4gMTYpLCAyMjQ2ODIyNTA3KSBeIE1hdGguaW11bChoMiBeIChoMiA+Pj4gMTMpLCAzMjY2NDg5OTA5KVxuICAgICAgaDIgPSBNYXRoLmltdWwoaDIgXiAoaDIgPj4+IDE2KSwgMjI0NjgyMjUwNykgXiBNYXRoLmltdWwoaDEgXiAoaDEgPj4+IDEzKSwgMzI2NjQ4OTkwOSlcblxuICAgICAgcmV0dXJuIDQyOTQ5NjcyOTYgKiAoMjA5NzE1MSAmIGgyKSArIChoMSA+Pj4gMClcbiAgICB9XG4gIH1cbn1cbjwvc2NyaXB0PlxuIl0sIm5hbWVzIjpbImluaXRGb3JtIiwiRm9ybSIsIl9hIiwiX3NmY19tYWluIiwiTG9hZGVyIiwicmVzcG9uc2UiLCJlcnJvciIsImdlbmVyYXRpb25JZCIsImF4aW9zIiwibG9hZFRlbXBsYXRlcyIsInN0b3JlIiwiU2VvTWV0YSIsIkNyZWF0ZUZvcm1CYXNlTW9kYWwiLCJ0byIsImZyb20iLCJuZXh0IiwiX19zcHJlYWRQcm9wcyIsIl9fc3ByZWFkVmFsdWVzIiwibWFwU3RhdGUiLCJzdGF0ZSIsInZhbHVlIiwidGVtcGxhdGUiLCJtYXBBY3Rpb25zIiwiZm9ybSIsInN0ciIsInNlZWQiLCJoMSIsImgyIiwiY2giXSwibWFwcGluZ3MiOiJzaEJBRUEsTUFBZUEsRUFBQSxDQUNiLFFBQVMsQ0FDUCxVQUFXLE9BQ1Qs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QUNBQSxFQUFBLENBQ0EsRUFBQSxJQUFBLENBQUEsQ0FBQSxFQUVBQSxFQUFBLENBQ0EsRUFFQSxXQUFBLE9BRUEsTUFBQSxDQUNBLE1BQUEsQ0FDQSxVQUFBLG9CQUNBLFdBQUEsR0FDQSxRQUFBLEdBQ0EsTUFBQSxHQUNBLHFCQUFBLEdBQ0EsZ0JBQUEsSUFDQSxDQUNBLEVBRUEsU0FBQUMsRUFBQUMsRUFBQSxHQUNBQyxFQUFBLENBQ0EsV0FBQUMsR0FBQUEsRUFBQSxpQkFBQSxFQUFBLFFBQ0Esa0JBQUFBLEdBQUFBLEVBQUEsaUJBQUEsRUFBQSxRQUNBLEtBQUFBLEdBQUFBLEVBQUEsS0FBQSxJQUNBLENBQUEsR0FMQSxDQU1BLEtBQUEsQ0FDQSxLQUFBLENBQ0EsT0FBQSxLQUFBLE9BQUEsTUFBQSxtQkFBQSxFQUFBLE9BQ0EsRUFFQSxJQUFBQyxFQUFBLENBQ0EsS0FBQSxPQUFBLE9BQUEsd0JBQUFBLENBQUEsQ0FDQSxDQUNBLEVBQ0EsV0FBQSxDQUNBLE9BQUEsS0FBQSxPQUFBLFFBQUEsNEJBQUEsRUFBQSxDQUNBLENBQ0EsR0FFQSxNQUFBLENBQ0EsV0FBQSxDQUNBLEtBQUEsWUFDQSxLQUFBLEtBQUEsYUFBQSxLQUFBLFVBQUEsR0FFQSxFQUNBLE1BQUEsQ0FDQSxLQUFBLFdBQUEsRUFDQSxDQUNBLEVBRUEsU0FBQSxDQVNBLEdBUkEsT0FBQSxlQUFBLElBQUEsQ0FDQSxHQUFBLEtBQUEsVUFDQSxNQUFBLEVBRUEsRUFFQSxLQUFBLFNBQUEsRUFDQSxLQUFBLGdCQUFBLEtBQUEsV0FBQSxLQUFBLFVBQUEsS0FBQSxLQUFBLEtBQUEsQ0FBQSxDQUFBLEVBQ0EsS0FBQSxPQUFBLE1BQUEsV0FBQSxRQUFBLEtBQUEsT0FBQSxNQUFBLFNBQUEsQ0FDQSxNQUFBQyxFQUFBLEtBQUEsT0FBQSxRQUFBLDBCQUFBLEVBQUEsS0FBQSxPQUFBLE1BQUEsUUFBQSxFQUNBQSxHQUFBQSxFQUFBLFlBQ0EsS0FBQSxLQUFBLElBQUFwQixFQUFBZ0IsSUFBQSxHQUFBLEtBQUEsS0FBQSxLQUFBLEdBQUFJLEVBQUEsVUFBQSxFQUVBLE1BRUEsS0FBQSxxQkFBQSxHQUVBLEtBQUEsV0FBQSxFQUNBLEtBQUEsZUFBQSxFQUVBLEtBQUEsV0FBQSxLQUFBLE9BQUEsSUFDQSxFQUVBLFNBQUEsQ0FBQSxFQUNBLFdBQUEsQ0FBQSxFQUVBLFFBQUFMLEVBQUFDLEVBQUEsR0FDQUssRUFBQSxDQUNBLGVBQUEsNkJBQ0EsQ0FBQSxHQUhBLENBSUEsY0FBQUMsRUFBQSxDQUNBLEtBQUEsS0FBQSxJQUFBdEIsRUFBQWdCLElBQUEsR0FBQSxLQUFBLEtBQUEsS0FBQSxHQUFBTSxFQUFBLENBQ0EsRUFDQSxTQUFBLENBQ0EsTUFBQSxDQUFBLEtBQUEsU0FBQSxLQUFBLGlCQUFBLEtBQUEsa0JBQUEsS0FBQSxXQUFBLEtBQUEsVUFBQSxLQUFBLEtBQUEsS0FBQSxDQUFBLENBQUEsQ0FDQSxFQUNBLFdBQUFDLEVBQUFDLEVBQUEsRUFBQSxDQUNBLElBQUFDLEVBQUEsV0FBQUQsRUFDQUUsRUFBQSxXQUFBRixFQUNBLFFBQUEsRUFBQSxFQUFBRyxFQUFBLEVBQUFKLEVBQUEsT0FBQSxJQUNBSSxFQUFBSixFQUFBLFdBQUEsQ0FBQSxFQUNBRSxFQUFBLEtBQUEsS0FBQUEsRUFBQUUsRUFBQSxVQUFBLEVBQ0FELEVBQUEsS0FBQSxLQUFBQSxFQUFBQyxFQUFBLFVBQUEsRUFHQSxPQUFBRixFQUFBLEtBQUEsS0FBQUEsRUFBQUEsSUFBQSxHQUFBLFVBQUEsRUFBQSxLQUFBLEtBQUFDLEVBQUFBLElBQUEsR0FBQSxVQUFBLEVBQ0FBLEVBQUEsS0FBQSxLQUFBQSxFQUFBQSxJQUFBLEdBQUEsVUFBQSxFQUFBLEtBQUEsS0FBQUQsRUFBQUEsSUFBQSxHQUFBLFVBQUEsRUFFQSxZQUFBLFFBQUFDLElBQUFELElBQUEsRUFDQSxDQUNBLEVBQ0EifQ==
